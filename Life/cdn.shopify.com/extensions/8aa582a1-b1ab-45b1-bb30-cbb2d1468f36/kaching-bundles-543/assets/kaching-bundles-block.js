var KachingBundlesBlock=function(){"use strict";var t=Object.defineProperty,e=(e,n,a)=>((e,n,a)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a)(e,"symbol"!=typeof n?n+"":n,a);function n(){}function a(t){return t()}function i(){return Object.create(null)}function r(t){t.forEach(a)}function s(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let l,o;function u(t,e){return t===e||(l||(l=document.createElement("a")),l.href=e,t===l.href)}function d(t,e){t.appendChild(e)}function h(t,e,n){t.insertBefore(e,n||null)}function p(t){t.parentNode&&t.parentNode.removeChild(t)}function g(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function m(t){return document.createElement(t)}function $(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function f(t){return document.createTextNode(t)}function b(){return f(" ")}function y(){return f("")}function _(t,e,n,a){return t.addEventListener(e,n,a),()=>t.removeEventListener(e,n,a)}function v(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function k(t,e){e=""+e,t.data!==e&&(t.data=e)}function w(t,e){t.value=null==e?"":e}function I(t,e,n){for(let a=0;a<t.options.length;a+=1){const n=t.options[a];if(n.__value===e)return void(n.selected=!0)}t.selectedIndex=-1}function x(t,e,n){t.classList.toggle(e,!!n)}class S{constructor(t=!1){e(this,"is_svg",!1),e(this,"e"),e(this,"n"),e(this,"t"),e(this,"a"),this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,e,n=null){this.e||(this.is_svg?this.e=$(e.nodeName):this.e=m(11===e.nodeType?"TEMPLATE":e.nodeName),this.t="TEMPLATE"!==e.tagName?e:e.content,this.c(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from("TEMPLATE"===this.e.nodeName?this.e.content.childNodes:this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)h(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(p)}}function B(t){o=t}function P(){if(!o)throw new Error("Function called outside component initialization");return o}function T(t){P().$$.on_mount.push(t)}function M(){const t=P();return(e,n,{cancelable:a=!1}={})=>{const i=t.$$.callbacks[e];if(i){const r=function(t,e,{bubbles:n=!1,cancelable:a=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:a})}(e,n,{cancelable:a});return i.slice().forEach((e=>{e.call(t,r)})),!r.defaultPrevented}return!0}}const z=[],V=[];let L=[];const F=[],D=Promise.resolve();let q=!1;function G(){q||(q=!0,D.then(Q))}function N(t){L.push(t)}const H=new Set;let E=0;function Q(){if(0!==E)return;const t=o;do{try{for(;E<z.length;){const t=z[E];E++,B(t),R(t.$$)}}catch(e){throw z.length=0,E=0,e}for(B(null),z.length=0,E=0;V.length;)V.pop()();for(let t=0;t<L.length;t+=1){const e=L[t];H.has(e)||(H.add(e),e())}L.length=0}while(z.length);for(;F.length;)F.pop()();q=!1,H.clear(),B(t)}function R(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(N)}}const A=new Set;let C,O;function j(){C={r:0,c:[],p:C}}function U(){C.r||r(C.c),C=C.p}function Z(t,e){t&&t.i&&(A.delete(t),t.i(e))}function J(t,e,n,a){if(t&&t.o){if(A.has(t))return;A.add(t),C.c.push((()=>{A.delete(t),a&&(n&&t.d(1),a())})),t.o(e)}else a&&a()}function W(t){return void 0!==(null==t?void 0:t.length)?t:Array.from(t)}function K(t){t&&t.c()}function X(t,e,n){const{fragment:i,after_update:c}=t.$$;i&&i.m(e,n),N((()=>{const e=t.$$.on_mount.map(a).filter(s);t.$$.on_destroy?t.$$.on_destroy.push(...e):r(e),t.$$.on_mount=[]})),c.forEach(N)}function Y(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];L.forEach((a=>-1===t.indexOf(a)?e.push(a):n.push(a))),n.forEach((t=>t())),L=e}(n.after_update),r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function tt(t,e,a,s,c,l,u=null,d=[-1]){const h=o;B(t);const g=t.$$={fragment:null,ctx:[],props:l,update:n,not_equal:c,bound:i(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(h?h.$$.context:[])),callbacks:i(),dirty:d,skip_bound:!1,root:e.target||h.$$.root};u&&u(g.root);let m=!1;if(g.ctx=a?a(t,e.props||{},((e,n,...a)=>{const i=a.length?a[0]:n;return g.ctx&&c(g.ctx[e],g.ctx[e]=i)&&(!g.skip_bound&&g.bound[e]&&g.bound[e](i),m&&function(t,e){-1===t.$$.dirty[0]&&(z.push(t),G(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(t,e)),n})):[],g.update(),m=!0,r(g.before_update),g.fragment=!!s&&s(g.ctx),e.target){if(e.hydrate){const t=($=e.target,Array.from($.childNodes));g.fragment&&g.fragment.l(t),t.forEach(p)}else g.fragment&&g.fragment.c();e.intro&&Z(t.$$.fragment),X(t,e.target,e.anchor),Q()}var $;B(h)}function et(t,e,n,a){var i;const r=null==(i=n[t])?void 0:i.type;if(e="Boolean"===r&&"boolean"!=typeof e?null!=e:e,!a||!n[t])return e;if("toAttribute"===a)switch(r){case"Object":case"Array":return null==e?null:JSON.stringify(e);case"Boolean":return e?"":null;case"Number":return null==e?null:e;default:return e}else switch(r){case"Object":case"Array":return e&&JSON.parse(e);case"Boolean":default:return e;case"Number":return null!=e?+e:e}}function nt(t,e,n,a,i,r){let s=class extends O{constructor(){super(t,n,i),this.$$p_d=e}static get observedAttributes(){return Object.keys(e).map((t=>(e[t].attribute||t).toLowerCase()))}};return Object.keys(e).forEach((t=>{Object.defineProperty(s.prototype,t,{get(){return this.$$c&&t in this.$$c?this.$$c[t]:this.$$d[t]},set(n){var a;n=et(t,n,e),this.$$d[t]=n,null==(a=this.$$c)||a.$set({[t]:n})}})})),a.forEach((t=>{Object.defineProperty(s.prototype,t,{get(){var e;return null==(e=this.$$c)?void 0:e[t]}})})),r&&(s=r(s)),t.element=s,s}"function"==typeof HTMLElement&&(O=class extends HTMLElement{constructor(t,n,a){super(),e(this,"$$ctor"),e(this,"$$s"),e(this,"$$c"),e(this,"$$cn",!1),e(this,"$$d",{}),e(this,"$$r",!1),e(this,"$$p_d",{}),e(this,"$$l",{}),e(this,"$$l_u",new Map),this.$$ctor=t,this.$$s=n,a&&this.attachShadow({mode:"open"})}addEventListener(t,e,n){if(this.$$l[t]=this.$$l[t]||[],this.$$l[t].push(e),this.$$c){const n=this.$$c.$on(t,e);this.$$l_u.set(e,n)}super.addEventListener(t,e,n)}removeEventListener(t,e,n){if(super.removeEventListener(t,e,n),this.$$c){const t=this.$$l_u.get(e);t&&(t(),this.$$l_u.delete(e))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let t=function(t){return()=>{let e;return{c:function(){e=m("slot"),"default"!==t&&v(e,"name",t)},m:function(t,n){h(t,e,n)},d:function(t){t&&p(e)}}}};if(await Promise.resolve(),!this.$$cn||this.$$c)return;const e={},n=function(t){const e={};return t.childNodes.forEach((t=>{e[t.slot||"default"]=!0})),e}(this);for(const i of this.$$s)i in n&&(e[i]=[t(i)]);for(const i of this.attributes){const t=this.$$g_p(i.name);t in this.$$d||(this.$$d[t]=et(t,i.value,this.$$p_d,"toProp"))}for(const i in this.$$p_d)i in this.$$d||void 0===this[i]||(this.$$d[i]=this[i],delete this[i]);this.$$c=new this.$$ctor({target:this.shadowRoot||this,props:{...this.$$d,$$slots:e,$$scope:{ctx:[]}}});const a=()=>{this.$$r=!0;for(const t in this.$$p_d)if(this.$$d[t]=this.$$c.$$.ctx[this.$$c.$$.props[t]],this.$$p_d[t].reflect){const e=et(t,this.$$d[t],this.$$p_d,"toAttribute");null==e?this.removeAttribute(this.$$p_d[t].attribute||t):this.setAttribute(this.$$p_d[t].attribute||t,e)}this.$$r=!1};this.$$c.$$.after_update.push(a),a();for(const i in this.$$l)for(const t of this.$$l[i]){const e=this.$$c.$on(i,t);this.$$l_u.set(t,e)}this.$$l={}}}attributeChangedCallback(t,e,n){var a;this.$$r||(t=this.$$g_p(t),this.$$d[t]=et(t,n,this.$$p_d,"toProp"),null==(a=this.$$c)||a.$set({[t]:this.$$d[t]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then((()=>{!this.$$cn&&this.$$c&&(this.$$c.$destroy(),this.$$c=void 0)}))}$$g_p(t){return Object.keys(this.$$p_d).find((e=>this.$$p_d[e].attribute===t||!this.$$p_d[e].attribute&&e.toLowerCase()===t))||t}});class at{constructor(){e(this,"$$"),e(this,"$$set")}$destroy(){Y(this,1),this.$destroy=n}$on(t,e){if(!s(e))return n;const a=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return a.push(e),()=>{const t=a.indexOf(e);-1!==t&&a.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function it(t){const e={bold:"bold",light:"300",medium:"500",regular:"normal"};for(const n in e)if(t.includes(n))return e[n];return"normal"}function rt(t){return t.includes("italic")?"italic":"normal"}function st(t){return`rgba(${t.red}, ${t.green}, ${t.blue}, ${t.alpha})`}function ct(t){return Object.entries(t).reduce(((t,[e,n])=>(n&&t.push(`--${e}:${n}`),t)),[]).join(";")}function lt(t){const{colors:e,fonts:n,cornerRadius:a,spacing:i,imageSize:r,imageCornerRadius:s}=t,c=e.border||e.primary;return ct({"block-title-color":st(e.title),"block-title-font-size":n.blockTitle.size+"px","block-title-font-weight":it(n.blockTitle.style),"block-title-font-style":rt(n.blockTitle.style),"block-spacing":null==i?void 0:i.toString(),"bar-border-radius":(a||0)+"px","bar-background-color":st(e.background),"bar-selected-background-color":st(e.selectedBackground||e.background),"bar-border-color":st({...c,alpha:.3*c.alpha}),"bar-selected-border-color":st(c),"block-block-title-color":st(e.blockTitle||e.title),"bar-title-color":st(e.title),"bar-title-font-size":n.title.size+"px","bar-title-font-weight":it(n.title.style),"bar-title-font-style":rt(n.title.style),"bar-subtitle-color":st(e.subtitle),"bar-subtitle-font-size":n.subtitle.size+"px","bar-subtitle-font-weight":it(n.subtitle.style),"bar-subtitle-font-style":rt(n.subtitle.style),"bar-price-color":st(e.price||e.title),"bar-full-price-color":st(e.fullPrice||e.subtitle),"bar-label-border-top-radius":(a?a-1:0)+"px","bar-label-background-color":st(e.labelBackground),"bar-label-color":st(e.label),"bar-label-font-size":n.label.size+"px","bar-label-font-weight":it(n.label.style),"bar-label-font-style":rt(n.label.style),"bar-most-popular-background-color":st(e.badgeBackground),"bar-most-popular-color":st(e.badgeText),"bar-variant-select-border-radius":(a||0)/2+"px","bar-image-size":(r||48)+"px","bar-image-border-radius":(s||0)+"px","kaching-free-gift-background-color":e.freeGiftBackground&&st(e.freeGiftBackground),"kaching-free-gift-text-color":e.freeGiftText&&st(e.freeGiftText),"kaching-free-gift-selected-background-color":e.freeGiftSelectedBackground&&st(e.freeGiftSelectedBackground),"kaching-free-gift-selected-text-color":e.freeGiftSelectedText&&st(e.freeGiftSelectedText),"kaching-free-gift-font-size":n.freeGift&&n.freeGift.size+"px","kaching-free-gift-font-weight":n.freeGift&&it(n.freeGift.style),"kaching-free-gift-font-style":n.freeGift&&rt(n.freeGift.style),"kaching-free-gift-image-border-radius":(a||0)/2+"px","kaching-upsell-background-color":e.upsellBackground&&st(e.upsellBackground),"kaching-upsell-text-color":e.upsellText&&st(e.upsellText),"kaching-upsell-selected-background-color":e.upsellSelectedBackground&&st(e.upsellSelectedBackground),"kaching-upsell-selected-text-color":e.upsellSelectedText&&st(e.upsellSelectedText),"kaching-upsell-font-size":n.upsell&&n.upsell.size+"px","kaching-upsell-font-weight":n.upsell&&it(n.upsell.style),"kaching-upsell-font-style":n.upsell&&rt(n.upsell.style),"kaching-upsell-image-border-radius":(a||0)/2+"px","kaching-bundle-products-image-border-radius":(a||0)/2+"px"})}"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");const ot={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},ut=t=>{const e=t.replace(/[^a-zA-Z]+/g,"").toLowerCase();if(!(e in ot))return;const n=ot[e];return{red:n[0],green:n[1],blue:n[2],alpha:1}},dt=(t,e)=>({red:Math.max(0,t.red-Math.round(t.red*e)),green:Math.max(0,t.green-Math.round(t.green*e)),blue:Math.max(0,t.blue-Math.round(t.blue*e)),alpha:t.alpha});function ht(t){let e;return{c(){e=m("div"),v(e,"class","kaching-bundles__swatch"),v(e,"style",t[0])},m(t,n){h(t,e,n)},p(t,[n]){1&n&&v(e,"style",t[0])},i:n,o:n,d(t){t&&p(e)}}}function pt(t,e,n){let a,{color:i}=e,{image:r}=e,{size:s}=e,{shape:c}=e,l="";return t.$$set=t=>{"color"in t&&n(1,i=t.color),"image"in t&&n(2,r=t.image),"size"in t&&n(3,s=t.size),"shape"in t&&n(4,c=t.shape)},t.$$.update=()=>{if(2&t.$$.dirty&&n(5,a=i?function(t){t=t.replace(/^#/,"");let e=parseInt(t,16);return{red:e>>16&255,green:e>>8&255,blue:255&e,alpha:1}}(i):null),60&t.$$.dirty){let t={"kaching-swatch-size":`${s-2}px`};const e={rounded:20,circle:50}[c];e&&(t={...t,"kaching-swatch-border-radius":`${e}%`}),r?t={...t,"kaching-swatch-image-url":`url(${r})`}:a&&(t={...t,"kaching-swatch-color":st(a),"kaching-swatch-border-color":st(dt(a,.1))}),n(0,l=ct(t))}},[l,i,r,s,c,a]}class gt extends at{constructor(t){super(),tt(this,t,pt,ht,c,{color:1,image:2,size:3,shape:4})}get color(){return this.$$.ctx[1]}set color(t){this.$$set({color:t}),Q()}get image(){return this.$$.ctx[2]}set image(t){this.$$set({image:t}),Q()}get size(){return this.$$.ctx[3]}set size(t){this.$$set({size:t}),Q()}get shape(){return this.$$.ctx[4]}set shape(t){this.$$set({shape:t}),Q()}}function mt(t,e,n){const a=t.slice();return a[13]=e[n],a[15]=n,a}function $t(t){let e,n,a=W(t[0].optionValues),i=[];for(let s=0;s<a.length;s+=1)i[s]=ft(mt(t,a,s));const r=t=>J(i[t],1,1,(()=>{i[t]=null}));return{c(){e=m("div");for(let t=0;t<i.length;t+=1)i[t].c();v(e,"class","kaching-bundles__swatch-dropdown__options")},m(t,a){h(t,e,a);for(let n=0;n<i.length;n+=1)i[n]&&i[n].m(e,null);n=!0},p(t,n){if(135&n){let s;for(a=W(t[0].optionValues),s=0;s<a.length;s+=1){const r=mt(t,a,s);i[s]?(i[s].p(r,n),Z(i[s],1)):(i[s]=ft(r),i[s].c(),Z(i[s],1),i[s].m(e,null))}for(j(),s=a.length;s<i.length;s+=1)r(s);U()}},i(t){if(!n){for(let t=0;t<a.length;t+=1)Z(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)J(i[e]);n=!1},d(t){t&&p(e),g(i,t)}}}function ft(t){let e,n,a,i,s,c,l,o,u,g,$=t[13].name+"";function y(){return t[10](t[13])}function w(...e){return t[11](t[13],...e)}return n=new gt({props:{color:t[13].swatch.color,image:t[13].swatch.image,size:1.333*t[1],shape:t[2]}}),{c(){e=m("span"),K(n.$$.fragment),a=b(),i=m("span"),s=f($),c=b(),v(e,"role","button"),v(e,"tabindex",t[15]),v(e,"class","kaching-bundles__swatch-dropdown__option kaching-bundles-option-value"),v(e,"data-value",l=t[13].name)},m(t,r){h(t,e,r),X(n,e,null),d(e,a),d(e,i),d(i,s),d(e,c),o=!0,u||(g=[_(e,"click",y),_(e,"keydown",w)],u=!0)},p(a,i){t=a;const r={};1&i&&(r.color=t[13].swatch.color),1&i&&(r.image=t[13].swatch.image),2&i&&(r.size=1.333*t[1]),4&i&&(r.shape=t[2]),n.$set(r),(!o||1&i)&&$!==($=t[13].name+"")&&k(s,$),(!o||1&i&&l!==(l=t[13].name))&&v(e,"data-value",l)},i(t){o||(Z(n.$$.fragment,t),o=!0)},o(t){J(n.$$.fragment,t),o=!1},d(t){t&&p(e),Y(n),u=!1,r(g)}}}function bt(t){let e,a,i,c,l,o,u,g,$,y,w,I=t[4].name+"";i=new gt({props:{color:t[4].swatch.color,image:t[4].swatch.image,size:t[1],shape:t[2]}});let x=t[3]&&$t(t);return{c(){e=m("div"),a=m("span"),K(i.$$.fragment),c=b(),l=m("span"),o=f(I),u=b(),x&&x.c(),v(a,"role","button"),v(a,"tabindex",0),v(a,"class","kaching-bundles__bar-variant-select"),v(e,"class","kaching-bundles__swatch-dropdown kaching-bundles-option"),v(e,"data-name",g=t[0].name)},m(r,p){var g;h(r,e,p),d(e,a),X(i,a,null),d(a,c),d(a,l),d(l,o),d(e,u),x&&x.m(e,null),$=!0,y||(w=[_(a,"click",t[5]),_(a,"keydown",t[9]),(g=yt.call(null,e,t[6]),g&&s(g.destroy)?g.destroy:n)],y=!0)},p(t,[n]){const a={};16&n&&(a.color=t[4].swatch.color),16&n&&(a.image=t[4].swatch.image),2&n&&(a.size=t[1]),4&n&&(a.shape=t[2]),i.$set(a),(!$||16&n)&&I!==(I=t[4].name+"")&&k(o,I),t[3]?x?(x.p(t,n),8&n&&Z(x,1)):(x=$t(t),x.c(),Z(x,1),x.m(e,null)):x&&(j(),J(x,1,1,(()=>{x=null})),U()),(!$||1&n&&g!==(g=t[0].name))&&v(e,"data-name",g)},i(t){$||(Z(i.$$.fragment,t),Z(x),$=!0)},o(t){J(i.$$.fragment,t),J(x),$=!1},d(t){t&&p(e),Y(i),x&&x.d(),y=!1,r(w)}}}function yt(t,e){const n=n=>{t.contains(n.target)||e()};return document.addEventListener("click",n,!0),{destroy(){document.removeEventListener("click",n,!0)}}}function _t(t,e,n){let a,{option:i}=e,{swatchSize:r}=e,{swatchShape:s}=e,{value:c}=e,l=!1;const o=M();function u(t){n(3,l=!l),t.preventDefault()}function d(t){n(8,c=t),n(3,l=!1),o("change",c)}return t.$$set=t=>{"option"in t&&n(0,i=t.option),"swatchSize"in t&&n(1,r=t.swatchSize),"swatchShape"in t&&n(2,s=t.swatchShape),"value"in t&&n(8,c=t.value)},t.$$.update=()=>{257&t.$$.dirty&&n(4,a=i.optionValues.find((t=>t.name===c)))},[i,r,s,l,a,u,function(){n(3,l=!1)},d,c,t=>("Enter"===t.key||" "===t.key)&&u(t),t=>d(t.name),(t,e)=>("Enter"===e.key||" "===e.key)&&d(t.name)]}nt(gt,{color:{},image:{},size:{},shape:{}},[],[],!0);class vt extends at{constructor(t){super(),tt(this,t,_t,bt,c,{option:0,swatchSize:1,swatchShape:2,value:8})}get option(){return this.$$.ctx[0]}set option(t){this.$$set({option:t}),Q()}get swatchSize(){return this.$$.ctx[1]}set swatchSize(t){this.$$set({swatchSize:t}),Q()}get swatchShape(){return this.$$.ctx[2]}set swatchShape(t){this.$$set({swatchShape:t}),Q()}get value(){return this.$$.ctx[8]}set value(t){this.$$set({value:t}),Q()}}function kt(t,e,n){const a=t.slice();return a[4]=e[n],a}function wt(t){let e,n,a,i,r,s=t[4].name+"";return{c(){e=m("option"),n=f(s),a=b(),e.__value=i=t[4].name,w(e,e.__value),v(e,"class","kaching-bundles-option-value"),v(e,"data-value",r=t[4].name)},m(t,i){h(t,e,i),d(e,n),d(e,a)},p(t,a){1&a&&s!==(s=t[4].name+"")&&k(n,s),1&a&&i!==(i=t[4].name)&&(e.__value=i,w(e,e.__value)),1&a&&r!==(r=t[4].name)&&v(e,"data-value",r)},d(t){t&&p(e)}}}function It(t){let e,a,i,r,s=W(t[0].optionValues),c=[];for(let n=0;n<s.length;n+=1)c[n]=wt(kt(t,s,n));return{c(){e=m("select");for(let t=0;t<c.length;t+=1)c[t].c();v(e,"class","kaching-bundles__bar-variant-select kaching-bundles-option"),v(e,"data-name",a=t[0].name)},m(n,a){h(n,e,a);for(let t=0;t<c.length;t+=1)c[t]&&c[t].m(e,null);I(e,t[1]),i||(r=_(e,"change",t[2]),i=!0)},p(t,[n]){if(1&n){let a;for(s=W(t[0].optionValues),a=0;a<s.length;a+=1){const i=kt(t,s,a);c[a]?c[a].p(i,n):(c[a]=wt(i),c[a].c(),c[a].m(e,null))}for(;a<c.length;a+=1)c[a].d(1);c.length=s.length}1&n&&a!==(a=t[0].name)&&v(e,"data-name",a),3&n&&I(e,t[1])},i:n,o:n,d(t){t&&p(e),g(c,t),i=!1,r()}}}function xt(t,e,n){let{option:a}=e,{value:i}=e;const r=M();return t.$$set=t=>{"option"in t&&n(0,a=t.option),"value"in t&&n(1,i=t.value)},[a,i,function(t){r("change",t.target.value)}]}nt(vt,{option:{},swatchSize:{},swatchShape:{},value:{}},[],[],!0);class St extends at{constructor(t){super(),tt(this,t,xt,It,c,{option:0,value:1})}get option(){return this.$$.ctx[0]}set option(t){this.$$set({option:t}),Q()}get value(){return this.$$.ctx[1]}set value(t){this.$$set({value:t}),Q()}}function Bt(t,e,n){const a=t.slice();return a[8]=e[n],a[10]=n,a}function Pt(t){let e,n,a,i,s,c,l,o;function u(){return t[5](t[8])}function g(...e){return t[6](t[8],...e)}return n=new gt({props:{color:t[8].swatch.color,image:t[8].swatch.image,size:t[2],shape:t[3]}}),{c(){e=m("span"),K(n.$$.fragment),a=b(),v(e,"role","button"),v(e,"tabindex",t[10]),v(e,"class","kaching-bundles__swatch-buttons__button kaching-bundles-option-value"),v(e,"title",i=t[8].name),v(e,"data-value",s=t[8].name),x(e,"kaching-bundles__swatch-buttons__button--selected",t[8].name===t[0])},m(t,i){h(t,e,i),X(n,e,null),d(e,a),c=!0,l||(o=[_(e,"click",u),_(e,"keydown",g)],l=!0)},p(a,r){t=a;const l={};2&r&&(l.color=t[8].swatch.color),2&r&&(l.image=t[8].swatch.image),4&r&&(l.size=t[2]),8&r&&(l.shape=t[3]),n.$set(l),(!c||2&r&&i!==(i=t[8].name))&&v(e,"title",i),(!c||2&r&&s!==(s=t[8].name))&&v(e,"data-value",s),(!c||3&r)&&x(e,"kaching-bundles__swatch-buttons__button--selected",t[8].name===t[0])},i(t){c||(Z(n.$$.fragment,t),c=!0)},o(t){J(n.$$.fragment,t),c=!1},d(t){t&&p(e),Y(n),l=!1,r(o)}}}function Tt(t){let e,n,a,i=W(t[1].optionValues),r=[];for(let c=0;c<i.length;c+=1)r[c]=Pt(Bt(t,i,c));const s=t=>J(r[t],1,1,(()=>{r[t]=null}));return{c(){e=m("div");for(let t=0;t<r.length;t+=1)r[t].c();v(e,"class","kaching-bundles__swatch-buttons kaching-bundles-option"),v(e,"data-name",n=t[1].name)},m(t,n){h(t,e,n);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(e,null);a=!0},p(t,[c]){if(31&c){let n;for(i=W(t[1].optionValues),n=0;n<i.length;n+=1){const a=Bt(t,i,n);r[n]?(r[n].p(a,c),Z(r[n],1)):(r[n]=Pt(a),r[n].c(),Z(r[n],1),r[n].m(e,null))}for(j(),n=i.length;n<r.length;n+=1)s(n);U()}(!a||2&c&&n!==(n=t[1].name))&&v(e,"data-name",n)},i(t){if(!a){for(let t=0;t<i.length;t+=1)Z(r[t]);a=!0}},o(t){r=r.filter(Boolean);for(let e=0;e<r.length;e+=1)J(r[e]);a=!1},d(t){t&&p(e),g(r,t)}}}function Mt(t,e,n){let{option:a}=e,{swatchSize:i}=e,{swatchShape:r}=e,{value:s}=e;const c=M();function l(t){n(0,s=t),c("change",s)}return t.$$set=t=>{"option"in t&&n(1,a=t.option),"swatchSize"in t&&n(2,i=t.swatchSize),"swatchShape"in t&&n(3,r=t.swatchShape),"value"in t&&n(0,s=t.value)},[s,a,i,r,l,t=>l(t.name),(t,e)=>("Enter"===e.key||" "===e.key)&&l(t.name)]}nt(St,{option:{},value:{}},[],[],!0);class zt extends at{constructor(t){super(),tt(this,t,Mt,Tt,c,{option:1,swatchSize:2,swatchShape:3,value:0})}get option(){return this.$$.ctx[1]}set option(t){this.$$set({option:t}),Q()}get swatchSize(){return this.$$.ctx[2]}set swatchSize(t){this.$$set({swatchSize:t}),Q()}get swatchShape(){return this.$$.ctx[3]}set swatchShape(t){this.$$set({swatchShape:t}),Q()}get value(){return this.$$.ctx[0]}set value(t){this.$$set({value:t}),Q()}}function Vt(t){let e,n;return e=new St({props:{option:t[1],value:t[0]}}),e.$on("change",t[5]),{c(){K(e.$$.fragment)},m(t,a){X(e,t,a),n=!0},p(t,n){const a={};2&n&&(a.option=t[1]),1&n&&(a.value=t[0]),e.$set(a)},i(t){n||(Z(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){Y(e,t)}}}function Lt(t){let e,n;return e=new zt({props:{option:t[1],swatchSize:t[2],swatchShape:t[3],value:t[0]}}),e.$on("change",t[5]),{c(){K(e.$$.fragment)},m(t,a){X(e,t,a),n=!0},p(t,n){const a={};2&n&&(a.option=t[1]),4&n&&(a.swatchSize=t[2]),8&n&&(a.swatchShape=t[3]),1&n&&(a.value=t[0]),e.$set(a)},i(t){n||(Z(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){Y(e,t)}}}function Ft(t){let e,n;return e=new vt({props:{option:t[1],swatchSize:t[2],swatchShape:t[3],value:t[0]}}),e.$on("change",t[5]),{c(){K(e.$$.fragment)},m(t,a){X(e,t,a),n=!0},p(t,n){const a={};2&n&&(a.option=t[1]),4&n&&(a.swatchSize=t[2]),8&n&&(a.swatchShape=t[3]),1&n&&(a.value=t[0]),e.$set(a)},i(t){n||(Z(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){Y(e,t)}}}function Dt(t){let e,n,a,i;const r=[Ft,Lt,Vt],s=[];function c(t,e){return"colorDropdown"===t[4]||"imageDropdown"===t[4]||"productImageDropdown"===t[4]||"mixedDropdown"===t[4]?0:"colorButtons"===t[4]||"imageButtons"===t[4]||"productImageButtons"===t[4]?1:2}return e=c(t),n=s[e]=r[e](t),{c(){n.c(),a=y()},m(t,n){s[e].m(t,n),h(t,a,n),i=!0},p(t,[i]){let l=e;e=c(t),e===l?s[e].p(t,i):(j(),J(s[l],1,1,(()=>{s[l]=null})),U(),n=s[e],n?n.p(t,i):(n=s[e]=r[e](t),n.c()),Z(n,1),n.m(a.parentNode,a))},i(t){i||(Z(n),i=!0)},o(t){J(n),i=!1},d(t){t&&p(a),s[e].d(t)}}}function qt(t,e,n){let{value:a}=e,{option:i}=e,{swatchSize:r=18}=e,{swatchShape:s="circle"}=e,{swatchType:c}=e;const l=M();return t.$$set=t=>{"value"in t&&n(0,a=t.value),"option"in t&&n(1,i=t.option),"swatchSize"in t&&n(2,r=t.swatchSize),"swatchShape"in t&&n(3,s=t.swatchShape),"swatchType"in t&&n(4,c=t.swatchType)},[a,i,r,s,c,function(t){l("change",{position:i.position,value:t.detail})}]}nt(zt,{option:{},swatchSize:{},swatchShape:{},value:{}},[],[],!0);class Gt extends at{constructor(t){super(),tt(this,t,qt,Dt,c,{value:0,option:1,swatchSize:2,swatchShape:3,swatchType:4})}get value(){return this.$$.ctx[0]}set value(t){this.$$set({value:t}),Q()}get option(){return this.$$.ctx[1]}set option(t){this.$$set({option:t}),Q()}get swatchSize(){return this.$$.ctx[2]}set swatchSize(t){this.$$set({swatchSize:t}),Q()}get swatchShape(){return this.$$.ctx[3]}set swatchShape(t){this.$$set({swatchShape:t}),Q()}get swatchType(){return this.$$.ctx[4]}set swatchType(t){this.$$set({swatchType:t}),Q()}}function Nt(t,e,n){const a=t.slice();return a[16]=e[n],a}function Ht(t){let e,n,a,i,r;return{c(){e=m("div"),n=m("span"),n.textContent="#",a=b(),i=m("span"),r=f(t[1]),v(e,"class","kaching-bundles__bar-variant-number")},m(t,s){h(t,e,s),d(e,n),d(e,a),d(e,i),d(i,r)},p(t,e){2&e&&k(r,t[1])},d(t){t&&p(e)}}}function Et(t){let e,n;return e=new Gt({props:{option:t[16],swatchSize:t[0].swatchSize,swatchShape:t[0].swatchShape,swatchType:t[16].swatchType,value:t[4][t[16].position-1]}}),e.$on("change",t[6]),{c(){K(e.$$.fragment)},m(t,a){X(e,t,a),n=!0},p(t,n){const a={};32&n&&(a.option=t[16]),1&n&&(a.swatchSize=t[0].swatchSize),1&n&&(a.swatchShape=t[0].swatchShape),32&n&&(a.swatchType=t[16].swatchType),48&n&&(a.value=t[4][t[16].position-1]),e.$set(a)},i(t){n||(Z(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){Y(e,t)}}}function Qt(t){let e,n,a=t[2]["system.invalid_variant"]+"";return{c(){e=m("div"),n=f(a),v(e,"class","kaching-bundles__invalid-variant-error")},m(t,a){h(t,e,a),d(e,n)},p(t,e){4&e&&a!==(a=t[2]["system.invalid_variant"]+"")&&k(n,a)},d(t){t&&p(e)}}}function Rt(t){let e,n,a,i,r,s,c=t[1]&&Ht(t),l=W(t[5]),o=[];for(let d=0;d<l.length;d+=1)o[d]=Et(Nt(t,l,d));const u=t=>J(o[t],1,1,(()=>{o[t]=null}));let $=!t[3]&&Qt(t);return{c(){e=m("div"),n=m("div"),c&&c.c(),a=b(),i=m("div");for(let t=0;t<o.length;t+=1)o[t].c();r=b(),$&&$.c(),v(i,"class","kaching-bundles__bar-variant-selects"),v(n,"class","kaching-bundles__bar-variant__content"),v(e,"class","kaching-bundles__bar-variant"),x(e,"kaching-bundles__bar-variant--invalid",!t[3])},m(t,l){h(t,e,l),d(e,n),c&&c.m(n,null),d(n,a),d(n,i);for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(i,null);d(e,r),$&&$.m(e,null),s=!0},p(t,[r]){if(t[1]?c?c.p(t,r):(c=Ht(t),c.c(),c.m(n,a)):c&&(c.d(1),c=null),113&r){let e;for(l=W(t[5]),e=0;e<l.length;e+=1){const n=Nt(t,l,e);o[e]?(o[e].p(n,r),Z(o[e],1)):(o[e]=Et(n),o[e].c(),Z(o[e],1),o[e].m(i,null))}for(j(),e=l.length;e<o.length;e+=1)u(e);U()}t[3]?$&&($.d(1),$=null):$?$.p(t,r):($=Qt(t),$.c(),$.m(e,null)),(!s||8&r)&&x(e,"kaching-bundles__bar-variant--invalid",!t[3])},i(t){if(!s){for(let t=0;t<l.length;t+=1)Z(o[t]);s=!0}},o(t){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)J(o[e]);s=!1},d(t){t&&p(e),c&&c.d(),g(o,t),$&&$.d()}}}function At(t){if(!t)return;const{red:e,green:n,blue:a}=t;return`#${e.toString(16).padStart(2,"0")}${n.toString(16).padStart(2,"0")}${a.toString(16).padStart(2,"0")}`}function Ct(t,e,n){let a,i,r,s,{config:c}=e,{product:l}=e,{selectedVariantId:o}=e,{swatchSettings:u}=e,{mediaImages:d}=e,{number:h}=e,{translations:p}=e;const g=M();function m(t,e){var n;const a=null==(n=e.find((e=>e.name===t.defaultName)))?void 0:n.swatchType;if(a&&"default"!==a)return a;if(c.nativeSwatchesEnabled)for(const i of t.optionValues)if(i.swatch.image||i.swatch.color)return"mixedDropdown";return"default"}function $(t,e,n,a){var i,r,s;const o=c.nativeSwatchesEnabled?e.swatch:null,u=n.find((e=>e.name===t.defaultName));if(!u||"default"===u.swatchType)return o||{color:null,image:null};if("colorButtons"===u.swatchType||"colorDropdown"===u.swatchType){return{color:At(null==(i=u.colors.find((t=>t.name===e.defaultName)))?void 0:i.color)||(null==o?void 0:o.color)||At(ut(e.defaultName))||null,image:null}}if("imageButtons"===u.swatchType||"imageDropdown"===u.swatchType){const t=null==(r=u.images.find((t=>t.name===e.defaultName)))?void 0:r.mediaImageGID,n=null==(s=a.find((e=>e.gid===t)))?void 0:s.url;return{color:(null==o?void 0:o.color)||null,image:n||(null==o?void 0:o.image)||null}}if("productImageDropdown"===u.swatchType||"productImageButtons"===u.swatchType){const n=l.variants.find((n=>n.image&&n.options[t.position-1]===e.name));return{color:null,image:(null==n?void 0:n.image)||null}}return{color:null,image:null}}return t.$$set=t=>{"config"in t&&n(7,c=t.config),"product"in t&&n(8,l=t.product),"selectedVariantId"in t&&n(9,o=t.selectedVariantId),"swatchSettings"in t&&n(0,u=t.swatchSettings),"mediaImages"in t&&n(10,d=t.mediaImages),"number"in t&&n(1,h=t.number),"translations"in t&&n(2,p=t.translations)},t.$$.update=()=>{var e,c,h;768&t.$$.dirty&&n(11,a=l.variants.find((t=>t.id===o))),2048&t.$$.dirty&&n(3,i=a),2048&t.$$.dirty&&n(4,r=a?a.options:[]),1281&t.$$.dirty&&n(5,(e=l,c=u.swatchOptions,h=d,s=e.options.map((t=>({defaultName:t.defaultName,name:t.name,position:t.position,swatchType:m(t,c),optionValues:t.optionValues.map((e=>({defaultName:e.defaultName,name:e.name,swatch:$(t,e,c,h)})))})))))},[u,h,p,i,r,s,function(t){const{position:e,value:a}=t.detail,s=[...r];s[e-1]=a,n(4,r=s);const c=l.variants.find((t=>r.every(((e,n)=>t.options[n]==e))));n(3,i=c),i&&g("change",{variantId:i.id})},c,l,o,d,a]}nt(Gt,{value:{},option:{},swatchSize:{},swatchShape:{},swatchType:{}},[],[],!0);class Ot extends at{constructor(t){super(),tt(this,t,Ct,Rt,c,{config:7,product:8,selectedVariantId:9,swatchSettings:0,mediaImages:10,number:1,translations:2})}get config(){return this.$$.ctx[7]}set config(t){this.$$set({config:t}),Q()}get product(){return this.$$.ctx[8]}set product(t){this.$$set({product:t}),Q()}get selectedVariantId(){return this.$$.ctx[9]}set selectedVariantId(t){this.$$set({selectedVariantId:t}),Q()}get swatchSettings(){return this.$$.ctx[0]}set swatchSettings(t){this.$$set({swatchSettings:t}),Q()}get mediaImages(){return this.$$.ctx[10]}set mediaImages(t){this.$$set({mediaImages:t}),Q()}get number(){return this.$$.ctx[1]}set number(t){this.$$set({number:t}),Q()}get translations(){return this.$$.ctx[2]}set translations(t){this.$$set({translations:t}),Q()}}function jt(t){let e,a,i,r,s,c,l,o,u,g,m;return{c(){var t,n;e=$("svg"),a=$("ellipse"),i=$("ellipse"),r=$("mask"),s=$("ellipse"),c=$("g"),l=$("ellipse"),o=$("path"),u=$("path"),g=$("path"),m=$("path"),v(a,"cx","47.9"),v(a,"cy","23.5"),v(a,"rx","47.9"),v(a,"ry","23.5"),v(a,"transform","matrix(.9929 .11897 -.14278 .98975 6.7 2)"),v(a,"fill","currentColor"),v(i,"cx","47.9"),v(i,"cy","23.5"),v(i,"rx","47.9"),v(i,"ry","23.5"),v(i,"transform","matrix(.9929 .11897 -.14278 .98975 6.7 2)"),v(i,"fill","#000"),v(i,"fill-opacity",".3"),v(s,"cx","47.9"),v(s,"cy","23.5"),v(s,"rx","47.9"),v(s,"ry","23.5"),v(s,"transform","matrix(.9929 .11897 -.14278 .98975 6.7 0)"),v(s,"fill","currentColor"),v(r,"id","a"),t="mask-type",n="alpha",r.style.setProperty(t,n,""),v(r,"maskUnits","userSpaceOnUse"),v(r,"x","3"),v(r,"y","5"),v(r,"width","96"),v(r,"height","48"),v(l,"cx","47.9"),v(l,"cy","23.5"),v(l,"rx","47.9"),v(l,"ry","23.5"),v(l,"transform","matrix(.9929 .11897 -.14278 .98975 6.7 0)"),v(l,"fill","currentColor"),v(c,"mask","url(#a)"),v(o,"class","most-popular-text"),v(o,"d","M28 15.4 25.4 24a.3.3 0 0 1 0 .1.2.2 0 0 1-.2.1c-.4.1-.7 0-.8-.4a1007.3 1007.3 0 0 1-3.9-9.2l-.8 7.6a.5.5 0 0 0 0 .2l.6.8a.7.7 0 0 1 0 .1.2.2 0 0 1 0 .1c0 .5-1.7.1-2 0-1 0 .1-1 .2-1.4l1.1-9c0-.4-.1-.7-.5-1a.4.4 0 0 1-.1-.2v-.2a.2.2 0 0 1 .1 0 15.2 15.2 0 0 1 3.1.2h.1c.1 0 0 0 0 .1.3.5-.5.7-.3 1.2a1361.6 1361.6 0 0 1 3.2 8.1l2.3-7.3a.7.7 0 0 0-.1-.6c-.3-.4-1-1 .1-1l2.7.4c.2 0 .3.2.2.4a.4.4 0 0 1-.1.2c-.3.3-.5.5-.4 1a771.7 771.7 0 0 0 2.5 10c.5.5.7 1-.3.8l-2.2-.3c-.5 0-.5-.4-.1-1a.7.7 0 0 0 .1-.6l-1.6-7.6c0-.2-.1-.2-.1 0zm24 4.7.1 4.5c0 1 .6 1.5 1.6 1.5.3 0 .5-.2.6-.5.1-.4.3-.5.5-.3h.1v.1c.1 1.1-.4 2-1.5 2-2.3.4-3.2-1.2-3.3-3.3l-.2-4.1c0-.4-.2-.5-.6-.5-.5 0-.8-.1-.7-.7a.2.2 0 0 1 .2-.1c1.3.2 2-.3 2-1.6a.2.2 0 0 1 .2-.1c1.1-.5.9 1.3.9 1.9a.1.1 0 0 0 .1.1l2.2.3.2.1c.1.3.1.5-.1.7a.2.2 0 0 1-.1 0 .4.4 0 0 1-.1 0l-2-.1a.1.1 0 0 0-.1 0zm-11.6 4.6c-.7.8-1.8 1.2-3 1.1-1.1 0-2.3-.5-3.3-1.4A5.7 5.7 0 0 1 33 23a5 5 0 0 1-.6-1.7 4 4 0 0 1 .1-1.7c.1-.5.4-1 .8-1.4.7-.7 1.7-1.2 2.9-1.1 1.2 0 2.4.6 3.3 1.4.5.4.9 1 1.2 1.5.3.5.5 1.1.5 1.7a4 4 0 0 1 0 1.6c-.2.6-.5 1-.8 1.4zm-2.4.4c.3 0 .5-.3.7-.5l.5-1v-1.4a6.4 6.4 0 0 0-.3-1.4 6.4 6.4 0 0 0-.6-1.4 4.7 4.7 0 0 0-.8-1 2.6 2.6 0 0 0-1-.6 1.5 1.5 0 0 0-.9 0c-.3 0-.5.3-.7.5l-.4 1a4.7 4.7 0 0 0 0 1.4 6.4 6.4 0 0 0 1.7 3.8c.3.3.6.5 1 .6.2 0 .5.1.8 0zm8-6c-1-.8-2.4-.4-2.3 1 0 .4.3.8.7 1l3 1.2c1.1.5 2.2 2.5 1.1 3.6-1.6 1.8-5.6.6-6.8-1.3-.2-.4-.1-.8.4-1 1.2-.5 1.5 1.5 2.3 2 1 .8 3 .6 2.4-1.1-.3-1-3.2-1.8-3.8-2.2-1.9-1.2-1.8-4 .8-4.3 1.6-.1 4.5.6 4.7 2.6a.3.3 0 0 1 0 .3c-1.1 1.3-1.9-1.3-2.5-1.8zM28.3 34.9c0 1.4 0 2 .8 3 .2.2.2.4 0 .6a.3.3 0 0 1-.2 0l-3.8-.3a.4.4 0 0 1-.3 0c-.3-.4-.3-.7 0-1a1 1 0 0 0 .4-.8L25 28c0-.4-.3-.9-.8-1.4a.3.3 0 0 1 0-.1.2.2 0 0 1 0-.1c0-.3.2-.4.6-.3 3.4.2 9.4.1 9.7 4.8.3 3.8-3 4.1-6 3.9zm-.2-6.7c0 1.4 0 3 .2 4.6 0 .3.2.5.5.6 3.4 1 2.5-3.2 1.6-4.6-.3-.5-.8-.9-1.5-1.1-.5-.2-.8 0-.8.5zM59.5 41c-1.7 1.3-4.3.4-5.2-1.4-1-1.8 0-4.1-1.3-5.8a.4.4 0 0 1 0-.2c0-.6.4-.5.8-.5a19.9 19.9 0 0 1 2.5 0 .4.4 0 0 1 .4.3l.2 5.3c0 .8.3 1.8 1.1 1.8 1.7.2 1-4.2 1-5.3a.5.5 0 0 0-.2-.2l-.5-.8c-.3-.3-.2-.5.3-.6h2.9c.3 0 .4 0 .4.4l.3 6c0 1.6 1.4 1.6 1.3-.2l-.3-7c0-.8-.3-1.2-.8-1.8a.3.3 0 0 1 0-.2.3.3 0 0 1 0-.2.3.3 0 0 1 .2 0l2.8-1.2c.5-.2.8 0 .8.6l.5 10.4c0 .5.2.8.6 1.2.3.4.4 1-.4.8-.9 0-3.1 0-3.9-.4a.4.4 0 0 0-.2 0c-.9 0-2.7.1-3.1-1a.1.1 0 0 0-.2 0zm-16.4-3c-.5 1-1.5 1.6-2.7 1.8-1.2.2-2.5 0-3.6-.7a5.7 5.7 0 0 1-1.5-1.2 5 5 0 0 1-.9-1.6 4.2 4.2 0 0 1-.2-1.7 3.5 3.5 0 0 1 .5-1.6c.5-.9 1.5-1.5 2.7-1.7 1.2-.2 2.5 0 3.6.7a5.7 5.7 0 0 1 1.4 1.2c.5.5.8 1 1 1.6.2.5.2 1.1.2 1.7a3.5 3.5 0 0 1-.5 1.5zm-3.3 1c.2 0 .3-.1.4-.4l.3-.8v-1.3a8.8 8.8 0 0 0-.3-1.3 8.8 8.8 0 0 0-.5-1.3 5.9 5.9 0 0 0-.6-1.1l-.6-.6c-.2-.2-.4-.2-.6-.2-.2 0-.3.2-.4.4l-.3 1v1.1a8.8 8.8 0 0 0 1.4 3.8l.6.6c.2.1.4.2.6.1z"),v(o,"fill","#FEFDFD"),v(u,"class","most-popular-text"),v(u,"d","M46.9 32.7a3 3 0 0 1 2.8-.3c2.5.8 3.6 2.5 3.5 5-.2 2.9-3.2 4.2-5.5 2.9-.2-.1-.2 0-.2 0 .1 1-.2 2.2.7 3 .3.2.4.5.1.7a.3.3 0 0 1-.2.1 401 401 0 0 0-3.5-.3c-.4 0-.6-.3-.7-.6a.3.3 0 0 1 0-.1.5.5 0 0 1 .1-.1l.5-.7a.4.4 0 0 0 0-.2l-.2-7.3c0-.6-1.1-.9-.9-1.6a.3.3 0 0 1 .2-.2l2.6-1a.2.2 0 0 1 .2 0c.2.1.4.4.4.7zM49 40c2.2 0 .5-5.5-.1-6.4-.7-.8-1.5-.7-1.7.4v3.4c.2.9.6 2.6 1.8 2.6zm24.5 2.7c-2.7 1.4-5.7-1-6.1-3.7-.7-3.5 2.8-5.8 5.8-3.8a.1.1 0 0 0 .1 0c.3-.7 2.3 0 2.9.2.4 0 .6.3.5.7a.3.3 0 0 1 0 .1.3.3 0 0 1-.1 0c-.4.4-.6.8-.6 1.2 0 2.3.2 3.7.2 4.2s1 1.2.7 1.7a.2.2 0 0 1-.1 0 .3.3 0 0 1-.2.1l-2.6-.3a.3.3 0 0 1-.2 0l-.2-.4a.1.1 0 0 0-.1 0zm-.4-5.2c-.2-1.8-2.7-3.4-2.8-.7-.1 1.5.3 4.6 1.9 5.5a.4.4 0 0 0 .2 0c1.4-.3.8-3.5.7-4.8zM80.5 36.5c.3-.3.5-.7 1-.9 3.8-1.6 3.6 4.9.9 2.9-.5-.4-.5-1.7-1.2-1.5a.3.3 0 0 0-.1 0 .3.3 0 0 0 0 .2c-.4.7-.4 4.6.1 5.2.2.3 1.5 1.2.2 1.2a52 52 0 0 1-3.5-.3c-.3 0-.5-.2-.5-.5a.4.4 0 0 1 0-.2c.4-.4.6-.7.6-1.2l-.2-3.5a.4.4 0 0 0 0-.2l-.9-1c-.2-.2 0-.4.3-.6l2.6-1c.3 0 .5 0 .5.4v1h.2z"),v(u,"fill","#FEFDFD"),v(g,"class","most-popular-text"),v(g,"fill-rule","evenodd"),v(g,"clip-rule","evenodd"),v(g,"d","m82.2 24.2-.7-6.2-.7 6.2-2.7-2.1 2 2.7-6.1.7 6.2.7L78 29l2.8-2.1.7 6.1.7-6.1L85 29l-2.2-2.8 6.2-.7-6.1-.7 2-2.7-2.7 2.1z"),v(g,"fill","#fff"),v(m,"class","most-popular-text"),v(m,"d","M45 4v1a2 2 0 0 0 2 2h1-1a2 2 0 0 0-2 2v1-1a2 2 0 0 0-2-2h-1 1a2 2 0 0 0 2-2V4zm12 41v1a2 2 0 0 0 2 2h1-1a2 2 0 0 0-2 2v1-1a2 2 0 0 0-2-2h-1 1a2 2 0 0 0 2-2v-1zM13 22v3a4 4 0 0 0 4 4h3-3a4 4 0 0 0-4 4v3-3a4 4 0 0 0-4-4H6h3a4 4 0 0 0 4-4v-3zM67 4v3a4 4 0 0 0 4 4h3-3a4 4 0 0 0-4 4v3-3a4 4 0 0 0-4-4h-3 3a4 4 0 0 0 4-4V4z"),v(m,"fill","#fff"),v(e,"width","102"),v(e,"height","60"),v(e,"fill","none"),v(e,"xmlns","http://www.w3.org/2000/svg")},m(t,n){h(t,e,n),d(e,a),d(e,i),d(e,r),d(r,s),d(e,c),d(c,l),d(e,o),d(e,u),d(e,g),d(e,m)},p:n,i:n,o:n,d(t){t&&p(e)}}}nt(Ot,{config:{},product:{},selectedVariantId:{},swatchSettings:{},mediaImages:{},number:{},translations:{}},[],[],!0);class Ut extends at{constructor(t){super(),tt(this,t,null,jt,c,{})}}function Zt(t){let e,a,i,r=(t[1]||Kt)+"";return{c(){e=m("div"),a=m("div"),i=f(r),v(a,"class","kaching-bundles__bar-most-popular__content"),v(e,"class","kaching-bundles__bar-most-popular kaching-bundles__bar-most-popular--simple")},m(t,n){h(t,e,n),d(e,a),d(a,i)},p(t,e){2&e&&r!==(r=(t[1]||Kt)+"")&&k(i,r)},i:n,o:n,d(t){t&&p(e)}}}function Jt(t){let e,a,i;return a=new Ut({}),{c(){e=m("div"),K(a.$$.fragment),v(e,"class","kaching-bundles__bar-most-popular kaching-bundles__bar-most-popular--fancy")},m(t,n){h(t,e,n),X(a,e,null),i=!0},p:n,i(t){i||(Z(a.$$.fragment,t),i=!0)},o(t){J(a.$$.fragment,t),i=!1},d(t){t&&p(e),Y(a)}}}function Wt(t){let e,n,a,i;const r=[Jt,Zt],s=[];function c(t,e){return"most-popular"===t[0]?0:1}return e=c(t),n=s[e]=r[e](t),{c(){n.c(),a=y()},m(t,n){s[e].m(t,n),h(t,a,n),i=!0},p(t,[i]){let l=e;e=c(t),e===l?s[e].p(t,i):(j(),J(s[l],1,1,(()=>{s[l]=null})),U(),n=s[e],n?n.p(t,i):(n=s[e]=r[e](t),n.c()),Z(n,1),n.m(a.parentNode,a))},i(t){i||(Z(n),i=!0)},o(t){J(n),i=!1},d(t){t&&p(a),s[e].d(t)}}}nt(Ut,{},[],[],!0);const Kt="MOST POPULAR";function Xt(t,e,n){let{style:a="simple"}=e,{text:i=Kt}=e;return t.$$set=t=>{"style"in t&&n(0,a=t.style),"text"in t&&n(1,i=t.text)},[a,i]}class Yt extends at{constructor(t){super(),tt(this,t,Xt,Wt,c,{style:0,text:1})}get style(){return this.$$.ctx[0]}set style(t){this.$$set({style:t}),Q()}get text(){return this.$$.ctx[1]}set text(t){this.$$set({text:t}),Q()}}function te(t,e){const n={amount:t=>t.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),amount_no_decimal:t=>t.toLocaleString("en-US",{maximumFractionDigits:0}),amount_no_decimals:t=>t.toLocaleString("en-US",{maximumFractionDigits:0}),amount_with_comma_separator:t=>t.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2}),amount_no_decimals_with_comma_separator:t=>t.toLocaleString("de-DE",{maximumFractionDigits:0}),amount_with_apostrophe_separator:t=>t.toLocaleString("de-CH",{minimumFractionDigits:2,maximumFractionDigits:2}),amount_no_decimals_with_space_separator:t=>t.toLocaleString("fr-FR",{maximumFractionDigits:0}).replace(/\s/g," "),amount_with_space_separator:t=>t.toLocaleString("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(/\s/g," "),amount_with_period_and_space_separator:t=>t.toLocaleString("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(/\s/g," ").replace(",",".")},a=/{{\s*(\w+)\s*}}/,i=e.match(a),r=(n[i?i[1]:"amount"]||n.amount)(t/100);return e.replace(a,r)}async function ee(t,e,n){await(G(),D);const a=new CustomEvent(e,{detail:n,bubbles:!0,cancelable:!0,composed:!0});t.dispatchEvent(a)}nt(Yt,{style:{},text:{}},[],[],!0);const ne=({dealBar:t,totalFullPrice:e,totalDiscountedPrice:n})=>{if(("quantity-break"===t.dealBarType||!t.dealBarType)&&"percentage"===t.discountType)return`${Math.round(Number(t.discountValue))}%`;const a=(e-n)/e*100;return`${Math.round(a)}%`},ae=({config:t,totalFullPrice:e,totalDiscountedPrice:n})=>te(e-n,t.moneyFormat),ie=({product:t})=>t.title,re={saved_percentage:ne,saved_total:ae,saved_amount:({config:t,totalFullPrice:e,totalDiscountedPrice:n,quantity:a})=>te((e-n)/a,t.moneyFormat),product:ie,new_total:({config:t,totalDiscountedPrice:e})=>te(e,t.moneyFormat),new_price:({config:t,totalDiscountedPrice:e,quantity:n})=>te(e/n,t.moneyFormat),original_total:({config:t,totalFullPrice:e})=>te(e,t.moneyFormat),original_price:({config:t,totalFullPrice:e,quantity:n})=>te(e/n,t.moneyFormat),metafield:({product:t})=>t.metafields.text||void 0,metafield2:({product:t})=>t.metafields.text2||void 0,metafield3:({product:t})=>t.metafields.text3||void 0,metafield4:({product:t})=>t.metafields.text4||void 0,"product.title":ie,"deal_bar.discount_percentage":ne,"deal_bar.discount_amount":ae},se=({config:t,product:e,dealBar:n,totalFullPrice:a,totalDiscountedPrice:i,quantity:r})=>s=>{if(!s)return s;const c=(({config:t,product:e,dealBar:n,totalFullPrice:a,totalDiscountedPrice:i,quantity:r})=>s=>{if(s.match(/^product\.metafields/))return((t,e)=>{if(!e.legacyMetafields)return;const n=t.match(/^product\.metafields\.([a-zA-Z0-9_.]+)\.([a-zA-Z0-9_.]+)/);if(!n)return;const[a,i,r]=n;return i&&r&&"kaching_bundles"===i&&("text"===r||"text2"===r)&&e.legacyMetafields[i]&&e.legacyMetafields[i][r]||void 0})(s,e);const c=re[s];return c?c({config:t,product:e,dealBar:n,totalFullPrice:a,totalDiscountedPrice:i,quantity:r}):void 0})({config:t,product:e,dealBar:n,totalFullPrice:a,totalDiscountedPrice:i,quantity:r});return s.replace(/{{\s*([a-zA-Z0-9_.]*)\s*}}/g,((t,e)=>c(e)||""))};function ce({discountType:t,discountValue:e,discountQuantity:n,variantQuantities:a,currencyRate:i,priceRounding:r}){const s=function({discountType:t,discountValue:e,discountQuantity:n,variantQuantities:a,currencyRate:i}){const r=a.map((({variant:t,quantity:e})=>t.price*e)),s=r.reduce(((t,e)=>t+e),0),c=a.map((({quantity:t})=>t)).reduce(((t,e)=>t+e),0);if("specific"===t){let t=100*Number(e)*i;if(c>Number(n)){const e=t/Number(n);t=Math.ceil(e*c)}return t<s?t:s}if("percentage"===t){const t=s*(100-Number(e))/100;return Math.ceil(t)}if("amount"===t){return s-Math.round(100*Number(e))*i*c}return s}({discountType:t,discountValue:e,discountQuantity:n,variantQuantities:a,currencyRate:i}),c=a.map((({quantity:t})=>t)).reduce(((t,e)=>t+e),0);if(r&&"default"!==t){let t;if(r.perItem){t=oe(s/c,r.precision)*c}else t=oe(s,r.precision);return t<a.map((({variant:t,quantity:e})=>t.price*e)).reduce(((t,e)=>t+e),0)?t:s}return s}function le(t,e,n,a){return t.bundleProducts.filter((({productGID:t})=>t)).map((t=>{const i=e[t.id];return i?ce({discountType:t.discountType,discountValue:t.discountValue,discountQuantity:t.quantity,variantQuantities:[i],currencyRate:n,priceRounding:a}):0})).reduce(((t,e)=>t+e),0)}function oe(t,e=".00"){switch(e){case".99":return t>99?100*Math.ceil(t/100)-1:t;case".95":return t>95?100*Math.ceil(t/100)-5:t;case".90":return t>90?100*Math.ceil(t/100)-10:t;case".x9":return t>9?10*Math.ceil(t/10)-1:t;case".x0":return 10*Math.ceil(t/10);default:return 100*Math.ceil(t/100)}}function ue(t){let e,n,a,i,r,s,c,l,o,g,$=t[3]&&de(t),f=t[6]&&!t[2].variantGID&&t[8]&&t[8].variants.length>1&&t[7]&&he(t);return{c(){var d,h;e=m("div"),n=m("a"),a=m("img"),c=b(),l=m("div"),$&&$.c(),o=b(),f&&f.c(),u(a.src,i=t[12]||(null==(d=t[9])?void 0:d.image)||(null==(h=t[8])?void 0:h.image))||v(a,"src",i),v(a,"alt",""),v(a,"height",r=t[2].imageSize||0),v(a,"class","kaching-bundles__free-gift__image"),v(n,"href",s=t[6]?t[10]:null),v(n,"target","_blank"),v(n,"class","kaching-bundles__free-gift__link"),v(l,"class","kaching-bundles__free-gift__content"),v(e,"class","kaching-bundles__free-gift"),v(e,"style",t[11])},m(t,i){h(t,e,i),d(e,n),d(n,a),d(e,c),d(e,l),$&&$.m(l,null),d(l,o),f&&f.m(l,null),g=!0},p(t,c){var d,h;(!g||4864&c&&!u(a.src,i=t[12]||(null==(d=t[9])?void 0:d.image)||(null==(h=t[8])?void 0:h.image)))&&v(a,"src",i),(!g||4&c&&r!==(r=t[2].imageSize||0))&&v(a,"height",r),(!g||1088&c&&s!==(s=t[6]?t[10]:null))&&v(n,"href",s),t[3]?$?$.p(t,c):($=de(t),$.c(),$.m(l,o)):$&&($.d(1),$=null),t[6]&&!t[2].variantGID&&t[8]&&t[8].variants.length>1&&t[7]?f?(f.p(t,c),452&c&&Z(f,1)):(f=he(t),f.c(),Z(f,1),f.m(l,null)):f&&(j(),J(f,1,1,(()=>{f=null})),U()),(!g||2048&c)&&v(e,"style",t[11])},i(t){g||(Z(f),g=!0)},o(t){J(f),g=!1},d(t){t&&p(e),$&&$.d(),f&&f.d()}}}function de(t){let e;return{c(){e=m("span"),v(e,"class","kaching-bundles__free-gift__text")},m(n,a){h(n,e,a),e.innerHTML=t[3]},p(t,n){8&n&&(e.innerHTML=t[3])},d(t){t&&p(e)}}}function he(t){let e,n;return e=new Ot({props:{config:t[0],product:t[8],selectedVariantId:t[7],swatchSettings:t[5],mediaImages:t[4],translations:t[1]}}),e.$on("change",t[13]),{c(){K(e.$$.fragment)},m(t,a){X(e,t,a),n=!0},p(t,n){const a={};1&n&&(a.config=t[0]),256&n&&(a.product=t[8]),128&n&&(a.selectedVariantId=t[7]),32&n&&(a.swatchSettings=t[5]),16&n&&(a.mediaImages=t[4]),2&n&&(a.translations=t[1]),e.$set(a)},i(t){n||(Z(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){Y(e,t)}}}function pe(t){let e,n,a=(!t[2].productGID||t[8]&&t[8].availableForSale&&t[9])&&ue(t);return{c(){a&&a.c(),e=y()},m(t,i){a&&a.m(t,i),h(t,e,i),n=!0},p(t,[n]){!t[2].productGID||t[8]&&t[8].availableForSale&&t[9]?a?(a.p(t,n),772&n&&Z(a,1)):(a=ue(t),a.c(),Z(a,1),a.m(e.parentNode,e)):a&&(j(),J(a,1,1,(()=>{a=null})),U())},i(t){n||(Z(a),n=!0)},o(t){J(a),n=!1},d(t){t&&p(e),a&&a.d(t)}}}function ge(t,e,n){let a,i,r,s,c,l,{config:o}=e,{translations:u}=e,{freeGift:d}=e,{text:h}=e,{mediaImages:p=[]}=e,{otherProducts:g=[]}=e,{swatchSettings:m}=e,{dealBarSelected:$=!1}=e;const f=M();let b=!1;T((()=>{n(15,b=!0)}));return t.$$set=t=>{"config"in t&&n(0,o=t.config),"translations"in t&&n(1,u=t.translations),"freeGift"in t&&n(2,d=t.freeGift),"text"in t&&n(3,h=t.text),"mediaImages"in t&&n(4,p=t.mediaImages),"otherProducts"in t&&n(14,g=t.otherProducts),"swatchSettings"in t&&n(5,m=t.swatchSettings),"dealBarSelected"in t&&n(6,$=t.dealBarSelected)},t.$$.update=()=>{16388&t.$$.dirty&&n(8,a=d.productGID?g.find((t=>t.id===Number(d.productGID.split("/").pop()))):void 0),20&t.$$.dirty&&n(12,i=p&&d.mediaImageGID&&(t=>{if(!t)return;const e=p.find((e=>e.gid===t));return null==e?void 0:e.url})(d.mediaImageGID)),4&t.$$.dirty&&n(11,r=ct({"kaching-free-gift-image-height":d.imageSize+"px"})),260&t.$$.dirty&&n(7,s=d.variantGID?Number(d.variantGID.split("/").pop()):(null==a?void 0:a.availableForSale)&&(null==a?void 0:a.variants[0].id)),384&t.$$.dirty&&n(9,c=a?a.variants.find((t=>t.id===s)):void 0),33536&t.$$.dirty&&c&&b&&(null==a?void 0:a.availableForSale)&&f("variantChanged",{variantId:c.id}),384&t.$$.dirty&&n(10,l=(null==a?void 0:a.url)?`${a.url}?variant=${s}`:void 0)},[o,u,d,h,p,m,$,s,a,c,l,r,i,function(t){const{variantId:e}=t.detail;n(7,s=e)},g,b]}class me extends at{constructor(t){super(),tt(this,t,ge,pe,c,{config:0,translations:1,freeGift:2,text:3,mediaImages:4,otherProducts:14,swatchSettings:5,dealBarSelected:6})}get config(){return this.$$.ctx[0]}set config(t){this.$$set({config:t}),Q()}get translations(){return this.$$.ctx[1]}set translations(t){this.$$set({translations:t}),Q()}get freeGift(){return this.$$.ctx[2]}set freeGift(t){this.$$set({freeGift:t}),Q()}get text(){return this.$$.ctx[3]}set text(t){this.$$set({text:t}),Q()}get mediaImages(){return this.$$.ctx[4]}set mediaImages(t){this.$$set({mediaImages:t}),Q()}get otherProducts(){return this.$$.ctx[14]}set otherProducts(t){this.$$set({otherProducts:t}),Q()}get swatchSettings(){return this.$$.ctx[5]}set swatchSettings(t){this.$$set({swatchSettings:t}),Q()}get dealBarSelected(){return this.$$.ctx[6]}set dealBarSelected(t){this.$$set({dealBarSelected:t}),Q()}}nt(me,{config:{},translations:{},freeGift:{},text:{},mediaImages:{},otherProducts:{},swatchSettings:{},dealBarSelected:{type:"Boolean"}},[],[],!0);const $e="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20100%20100'%3e%3crect%20width='100'%20height='100'%20fill='%23dddddd'%20/%3e%3c/svg%3e";function fe(t){let e,a;return{c(){e=$("svg"),a=$("path"),v(a,"d","M12.334 1 5 8.333 1.667 5"),v(a,"stroke","currentColor"),v(a,"stroke-width","2"),v(a,"stroke-linecap","round"),v(a,"stroke-linejoin","round"),v(e,"width","14"),v(e,"height","10"),v(e,"fill","none"),v(e,"xmlns","http://www.w3.org/2000/svg")},m(t,n){h(t,e,n),d(e,a)},p:n,i:n,o:n,d(t){t&&p(e)}}}class be extends at{constructor(t){super(),tt(this,t,null,fe,c,{})}}function ye(t){let e,n,a,i,r,s,c,l,o,g,$,f,y,_,k=t[6]&&_e(t),w=t[16]&&ke(t),I=t[6]&&!t[3].variantGID&&t[12]&&t[12].variants.length>1&&t[11]&&we(t);function x(t,e){return t[2].showBothPrices?xe:Ie}let S=x(t),B=S(t);return{c(){var d,h;e=m("div"),n=m("div"),k&&k.c(),a=b(),i=m("a"),r=m("img"),o=b(),g=m("div"),w&&w.c(),$=b(),I&&I.c(),f=b(),y=m("div"),B.c(),u(r.src,s=t[19]||(null==(d=t[9])?void 0:d.image)||(null==(h=t[12])?void 0:h.image))||v(r,"src",s),v(r,"alt",""),v(r,"height",c=t[3].imageSize||0),v(r,"class","kaching-bundles__upsell__image"),v(i,"href",l=t[6]?t[17]:null),v(i,"target","_blank"),v(i,"class","kaching-bundles__upsell__link"),v(g,"class","kaching-bundles__upsell__content"),v(n,"class","kaching-bundles__upsell__main"),v(y,"class","kaching-bundles__upsell__pricing"),v(e,"class","kaching-bundles__upsell"),v(e,"style",t[18])},m(t,s){h(t,e,s),d(e,n),k&&k.m(n,null),d(n,a),d(n,i),d(i,r),d(n,o),d(n,g),w&&w.m(g,null),d(g,$),I&&I.m(g,null),d(e,f),d(e,y),B.m(y,null),_=!0},p(t,o){var d,h;t[6]?k?(k.p(t,o),64&o&&Z(k,1)):(k=_e(t),k.c(),Z(k,1),k.m(n,a)):k&&(j(),J(k,1,1,(()=>{k=null})),U()),(!_||528896&o&&!u(r.src,s=t[19]||(null==(d=t[9])?void 0:d.image)||(null==(h=t[12])?void 0:h.image)))&&v(r,"src",s),(!_||8&o&&c!==(c=t[3].imageSize||0))&&v(r,"height",c),(!_||131136&o&&l!==(l=t[6]?t[17]:null))&&v(i,"href",l),t[16]?w?w.p(t,o):(w=ke(t),w.c(),w.m(g,$)):w&&(w.d(1),w=null),t[6]&&!t[3].variantGID&&t[12]&&t[12].variants.length>1&&t[11]?I?(I.p(t,o),6216&o&&Z(I,1)):(I=we(t),I.c(),Z(I,1),I.m(g,null)):I&&(j(),J(I,1,1,(()=>{I=null})),U()),S===(S=x(t))&&B?B.p(t,o):(B.d(1),B=S(t),B&&(B.c(),B.m(y,null))),(!_||262144&o)&&v(e,"style",t[18])},i(t){_||(Z(k),Z(I),_=!0)},o(t){J(k),J(I),_=!1},d(t){t&&p(e),k&&k.d(),w&&w.d(),I&&I.d(),B.d()}}}function _e(t){let e,n,a,i,s=t[10]&&ve();return{c(){e=m("span"),s&&s.c(),v(e,"class","kaching-bundles__upsell__checkbox"),v(e,"role","button"),v(e,"tabindex",0),x(e,"kaching-bundles__upsell__checkbox--selected",t[10])},m(r,c){h(r,e,c),s&&s.m(e,null),n=!0,a||(i=[_(e,"click",t[21]),_(e,"keydown",t[25])],a=!0)},p(t,a){t[10]?s?1024&a&&Z(s,1):(s=ve(),s.c(),Z(s,1),s.m(e,null)):s&&(j(),J(s,1,1,(()=>{s=null})),U()),(!n||1024&a)&&x(e,"kaching-bundles__upsell__checkbox--selected",t[10])},i(t){n||(Z(s),n=!0)},o(t){J(s),n=!1},d(t){t&&p(e),s&&s.d(),a=!1,r(i)}}}function ve(t){let e,n;return e=new be({}),{c(){K(e.$$.fragment)},m(t,a){X(e,t,a),n=!0},i(t){n||(Z(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){Y(e,t)}}}function ke(t){let e,n,a;return{c(){e=m("span"),v(e,"class","kaching-bundles__upsell__text"),v(e,"role","button"),v(e,"tabindex",0)},m(i,r){h(i,e,r),e.innerHTML=t[16],n||(a=[_(e,"click",t[21]),_(e,"keydown",t[26])],n=!0)},p(t,n){65536&n&&(e.innerHTML=t[16])},d(t){t&&p(e),n=!1,r(a)}}}function we(t){let e,n;return e=new Ot({props:{config:t[0],product:t[12],selectedVariantId:t[11],swatchSettings:t[5],mediaImages:t[4],translations:t[1]}}),e.$on("change",t[20]),{c(){K(e.$$.fragment)},m(t,a){X(e,t,a),n=!0},p(t,n){const a={};1&n&&(a.config=t[0]),4096&n&&(a.product=t[12]),2048&n&&(a.selectedVariantId=t[11]),32&n&&(a.swatchSettings=t[5]),16&n&&(a.mediaImages=t[4]),2&n&&(a.translations=t[1]),e.$set(a)},i(t){n||(Z(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){Y(e,t)}}}function Ie(t){let e,n,a,i=te(t[2].showPricesPerItem?t[14]:t[7],t[0].moneyFormat)+"",r=t[13]&&Se(t);return{c(){e=m("div"),n=b(),r&&r.c(),a=y(),v(e,"class","kaching-bundles__upsell__price")},m(t,s){h(t,e,s),e.innerHTML=i,h(t,n,s),r&&r.m(t,s),h(t,a,s)},p(t,n){16517&n&&i!==(i=te(t[2].showPricesPerItem?t[14]:t[7],t[0].moneyFormat)+"")&&(e.innerHTML=i),t[13]?r?r.p(t,n):(r=Se(t),r.c(),r.m(a.parentNode,a)):r&&(r.d(1),r=null)},d(t){t&&(p(e),p(n),p(a)),r&&r.d(t)}}}function xe(t){let e,n,a,i,r,s=te(t[14],t[0].moneyFormat)+"",c=t[13]&&Be(t),l=t[3].quantity>1&&Pe(t);return{c(){e=m("div"),n=m("div"),a=b(),c&&c.c(),i=b(),l&&l.c(),r=y(),v(n,"class","kaching-bundles__upsell__price"),v(e,"class","kaching-bundles__upsell__pricing-row kaching-bundles__upsell__pricing-row--main")},m(t,o){h(t,e,o),d(e,n),n.innerHTML=s,d(e,a),c&&c.m(e,null),h(t,i,o),l&&l.m(t,o),h(t,r,o)},p(t,a){16385&a&&s!==(s=te(t[14],t[0].moneyFormat)+"")&&(n.innerHTML=s),t[13]?c?c.p(t,a):(c=Be(t),c.c(),c.m(e,null)):c&&(c.d(1),c=null),t[3].quantity>1?l?l.p(t,a):(l=Pe(t),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},d(t){t&&(p(e),p(i),p(r)),c&&c.d(),l&&l.d(t)}}}function Se(t){let e,n=te(t[2].showPricesPerItem?t[15]:t[8],t[0].moneyFormat)+"";return{c(){e=m("div"),v(e,"class","kaching-bundles__upsell__full-price")},m(t,a){h(t,e,a),e.innerHTML=n},p(t,a){33029&a&&n!==(n=te(t[2].showPricesPerItem?t[15]:t[8],t[0].moneyFormat)+"")&&(e.innerHTML=n)},d(t){t&&p(e)}}}function Be(t){let e,n=te(t[15],t[0].moneyFormat)+"";return{c(){e=m("div"),v(e,"class","kaching-bundles__upsell__full-price")},m(t,a){h(t,e,a),e.innerHTML=n},p(t,a){32769&a&&n!==(n=te(t[15],t[0].moneyFormat)+"")&&(e.innerHTML=n)},d(t){t&&p(e)}}}function Pe(t){let e,n,a,i,r=te(t[7],t[0].moneyFormat)+"",s=te(t[8],t[0].moneyFormat)+"";return{c(){e=m("div"),n=m("div"),a=b(),i=m("div"),v(n,"class","kaching-bundles__upsell__price"),v(i,"class","kaching-bundles__upsell__full-price"),v(e,"class","kaching-bundles__upsell__pricing-row kaching-bundles__upsell__pricing-row--secondary")},m(t,c){h(t,e,c),d(e,n),n.innerHTML=r,d(e,a),d(e,i),i.innerHTML=s},p(t,e){129&e&&r!==(r=te(t[7],t[0].moneyFormat)+"")&&(n.innerHTML=r),257&e&&s!==(s=te(t[8],t[0].moneyFormat)+"")&&(i.innerHTML=s)},d(t){t&&p(e)}}}function Te(t){let e,n,a=t[12]&&t[12].availableForSale&&t[9]&&(!t[3].visibleOnlyWhenDealBarSelected||t[6])&&ye(t);return{c(){a&&a.c(),e=y()},m(t,i){a&&a.m(t,i),h(t,e,i),n=!0},p(t,[n]){t[12]&&t[12].availableForSale&&t[9]&&(!t[3].visibleOnlyWhenDealBarSelected||t[6])?a?(a.p(t,n),4680&n&&Z(a,1)):(a=ye(t),a.c(),Z(a,1),a.m(e.parentNode,e)):a&&(j(),J(a,1,1,(()=>{a=null})),U())},i(t){n||(Z(a),n=!0)},o(t){J(a),n=!1},d(t){t&&p(e),a&&a.d(t)}}}function Me(t,e,n){let a,i,r,s,c,l,o,u,d,h,p,g,m,$,{config:f}=e,{translations:b}=e,{dealBlock:y}=e,{upsell:_}=e,{mediaImages:v=[]}=e,{otherProducts:k=[]}=e,{swatchSettings:w}=e,{dealBarSelected:I=!1}=e;const x=M();let S=!1;T((()=>{n(23,S=!0)}));function B(){n(10,a=!a)}return t.$$set=t=>{"config"in t&&n(0,f=t.config),"translations"in t&&n(1,b=t.translations),"dealBlock"in t&&n(2,y=t.dealBlock),"upsell"in t&&n(3,_=t.upsell),"mediaImages"in t&&n(4,v=t.mediaImages),"otherProducts"in t&&n(22,k=t.otherProducts),"swatchSettings"in t&&n(5,w=t.swatchSettings),"dealBarSelected"in t&&n(6,I=t.dealBarSelected)},t.$$.update=()=>{8&t.$$.dirty&&n(10,a=_.preselected),4194312&t.$$.dirty&&n(12,i=_.productGID?k.find((t=>t.id===Number(_.productGID.split("/").pop()))):void 0),24&t.$$.dirty&&n(19,r=v&&_.mediaImageGID&&(t=>{if(!t)return;const e=v.find((e=>e.gid===t));return null==e?void 0:e.url})(_.mediaImageGID)),8&t.$$.dirty&&n(18,s=ct({"kaching-upsell-image-height":_.imageSize+"px"})),4104&t.$$.dirty&&n(11,c=_.variantGID?Number(_.variantGID.split("/").pop()):null==i?void 0:i.variants[0].id),6144&t.$$.dirty&&n(9,l=null==i?void 0:i.variants.find((t=>t.id===c))),8394240&t.$$.dirty&&l&&S&&(null==i?void 0:i.availableForSale)&&x("variantChanged",{variantId:a?l.id:null}),6144&t.$$.dirty&&n(17,o=(null==i?void 0:i.url)?`${i.url}?variant=${c}`:void 0),10&t.$$.dirty&&n(16,u=b[_.text]||_.text),4&t.$$.dirty&&n(24,d=y.priceRounding?{perItem:y.showPricesPerItem,precision:y.priceRoundingPrecision}:void 0),512&t.$$.dirty&&n(8,h=function(t){if(!t)return 0;let e=t.price;return y.useProductCompareAtPrice&&t.compareAtPrice&&(e=Math.max(e,t.compareAtPrice)),e*_.quantity}(l)),264&t.$$.dirty&&n(15,p=Math.ceil(h/_.quantity)),16777737&t.$$.dirty&&n(7,g=ce({discountType:_.discountType,discountValue:_.discountValue,discountQuantity:_.quantity,variantQuantities:l?[{variant:l,quantity:_.quantity}]:[],currencyRate:f.currencyRate,priceRounding:d})),136&t.$$.dirty&&n(14,m=Math.ceil(g/_.quantity)),384&t.$$.dirty&&n(13,$=h!==g)},[f,b,y,_,v,w,I,g,h,l,a,c,i,$,m,p,u,o,s,r,function(t){const{variantId:e}=t.detail;n(11,c=e)},B,k,S,d,t=>("Enter"===t.key||" "===t.key)&&B(),t=>("Enter"===t.key||" "===t.key)&&B()]}nt(be,{},[],[],!0);class ze extends at{constructor(t){super(),tt(this,t,Me,Te,c,{config:0,translations:1,dealBlock:2,upsell:3,mediaImages:4,otherProducts:22,swatchSettings:5,dealBarSelected:6})}get config(){return this.$$.ctx[0]}set config(t){this.$$set({config:t}),Q()}get translations(){return this.$$.ctx[1]}set translations(t){this.$$set({translations:t}),Q()}get dealBlock(){return this.$$.ctx[2]}set dealBlock(t){this.$$set({dealBlock:t}),Q()}get upsell(){return this.$$.ctx[3]}set upsell(t){this.$$set({upsell:t}),Q()}get mediaImages(){return this.$$.ctx[4]}set mediaImages(t){this.$$set({mediaImages:t}),Q()}get otherProducts(){return this.$$.ctx[22]}set otherProducts(t){this.$$set({otherProducts:t}),Q()}get swatchSettings(){return this.$$.ctx[5]}set swatchSettings(t){this.$$set({swatchSettings:t}),Q()}get dealBarSelected(){return this.$$.ctx[6]}set dealBarSelected(t){this.$$set({dealBarSelected:t}),Q()}}function Ve(t,e,n){const a=t.slice();return a[50]=e[n],a[52]=n,a}function Le(t){let e,n;return e=new Yt({props:{style:t[4].badgeStyle,text:t[15]||void 0}}),{c(){K(e.$$.fragment)},m(t,a){X(e,t,a),n=!0},p(t,n){const a={};16&n[0]&&(a.style=t[4].badgeStyle),32768&n[0]&&(a.text=t[15]||void 0),e.$set(a)},i(t){n||(Z(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){Y(e,t)}}}function Fe(t){let e;return{c(){e=m("div"),v(e,"class","kaching-bundles__bar-radio")},m(t,n){h(t,e,n)},p:n,d(t){t&&p(e)}}}function De(t){let e,n;return{c(){e=m("img"),v(e,"class","kaching-bundles__bar-image"),v(e,"alt",""),u(e.src,n=t[16])||v(e,"src",n)},m(t,n){h(t,e,n)},p(t,a){65536&a[0]&&!u(e.src,n=t[16])&&v(e,"src",n)},d(t){t&&p(e)}}}function qe(t){let e;return{c(){e=m("span"),v(e,"class","kaching-bundles__bar-label")},m(n,a){h(n,e,a),e.innerHTML=t[25]},p(t,n){33554432&n[0]&&(e.innerHTML=t[25])},d(t){t&&p(e)}}}function Ge(t){let e;return{c(){e=m("div"),v(e,"class","kaching-bundles__bar-subtitle")},m(n,a){h(n,e,a),e.innerHTML=t[26]},p(t,n){67108864&n[0]&&(e.innerHTML=t[26])},d(t){t&&p(e)}}}function Ne(t){let e,n,a,i=te(t[2].showPricesPerItem?t[21]:t[11],t[0].moneyFormat)+"",r=t[20]&&Qe(t);return{c(){e=m("div"),n=b(),r&&r.c(),a=y(),v(e,"class","kaching-bundles__bar-price")},m(t,s){h(t,e,s),e.innerHTML=i,h(t,n,s),r&&r.m(t,s),h(t,a,s)},p(t,n){2099205&n[0]&&i!==(i=te(t[2].showPricesPerItem?t[21]:t[11],t[0].moneyFormat)+"")&&(e.innerHTML=i),t[20]?r?r.p(t,n):(r=Qe(t),r.c(),r.m(a.parentNode,a)):r&&(r.d(1),r=null)},d(t){t&&(p(e),p(n),p(a)),r&&r.d(t)}}}function He(t){let e,n,a,i,r,s,c,l,o,u=te(t[2].showPricesPerItem?t[21]:t[11],t[0].moneyFormat)+"",g=te(t[17],t[0].moneyFormat)+"",$=t[20]&&Re(t);return{c(){e=m("div"),n=m("div"),a=b(),$&&$.c(),i=b(),r=m("div"),s=m("div"),c=new S(!1),l=f(" / "),o=f(t[12]),v(n,"class","kaching-bundles__bar-price"),v(e,"class","kaching-bundles__bar-pricing-row kaching-bundles__bar-pricing-row--primary"),c.a=l,v(s,"class","kaching-bundles__bar-unit-price"),v(r,"class","kaching-bundles__bar-pricing-row kaching-bundles__bar-pricing-row--secondary")},m(t,p){h(t,e,p),d(e,n),n.innerHTML=u,d(e,a),$&&$.m(e,null),h(t,i,p),h(t,r,p),d(r,s),c.m(g,s),d(s,l),d(s,o)},p(t,a){2099205&a[0]&&u!==(u=te(t[2].showPricesPerItem?t[21]:t[11],t[0].moneyFormat)+"")&&(n.innerHTML=u),t[20]?$?$.p(t,a):($=Re(t),$.c(),$.m(e,null)):$&&($.d(1),$=null),131073&a[0]&&g!==(g=te(t[17],t[0].moneyFormat)+"")&&c.p(g),4096&a[0]&&k(o,t[12])},d(t){t&&(p(e),p(i),p(r)),$&&$.d()}}}function Ee(t){let e,n,a,i,r,s=te(t[21],t[0].moneyFormat)+"",c=t[20]&&Ae(t),l=t[13]>1&&Ce(t);return{c(){e=m("div"),n=m("div"),a=b(),c&&c.c(),i=b(),l&&l.c(),r=y(),v(n,"class","kaching-bundles__bar-price"),v(e,"class","kaching-bundles__bar-pricing-row kaching-bundles__bar-pricing-row--main")},m(t,o){h(t,e,o),d(e,n),n.innerHTML=s,d(e,a),c&&c.m(e,null),h(t,i,o),l&&l.m(t,o),h(t,r,o)},p(t,a){2097153&a[0]&&s!==(s=te(t[21],t[0].moneyFormat)+"")&&(n.innerHTML=s),t[20]?c?c.p(t,a):(c=Ae(t),c.c(),c.m(e,null)):c&&(c.d(1),c=null),t[13]>1?l?l.p(t,a):(l=Ce(t),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},d(t){t&&(p(e),p(i),p(r)),c&&c.d(),l&&l.d(t)}}}function Qe(t){let e,n=te(t[2].showPricesPerItem?t[22]:t[14],t[0].moneyFormat)+"";return{c(){e=m("div"),v(e,"class","kaching-bundles__bar-full-price")},m(t,a){h(t,e,a),e.innerHTML=n},p(t,a){4210693&a[0]&&n!==(n=te(t[2].showPricesPerItem?t[22]:t[14],t[0].moneyFormat)+"")&&(e.innerHTML=n)},d(t){t&&p(e)}}}function Re(t){let e,n=te(t[2].showPricesPerItem?t[22]:t[14],t[0].moneyFormat)+"";return{c(){e=m("div"),v(e,"class","kaching-bundles__bar-full-price")},m(t,a){h(t,e,a),e.innerHTML=n},p(t,a){4210693&a[0]&&n!==(n=te(t[2].showPricesPerItem?t[22]:t[14],t[0].moneyFormat)+"")&&(e.innerHTML=n)},d(t){t&&p(e)}}}function Ae(t){let e,n=te(t[22],t[0].moneyFormat)+"";return{c(){e=m("div"),v(e,"class","kaching-bundles__bar-full-price")},m(t,a){h(t,e,a),e.innerHTML=n},p(t,a){4194305&a[0]&&n!==(n=te(t[22],t[0].moneyFormat)+"")&&(e.innerHTML=n)},d(t){t&&p(e)}}}function Ce(t){let e,n,a,i,r=te(t[11],t[0].moneyFormat)+"",s=te(t[14],t[0].moneyFormat)+"";return{c(){e=m("div"),n=m("div"),a=b(),i=m("div"),v(n,"class","kaching-bundles__bar-price"),v(i,"class","kaching-bundles__bar-full-price"),v(e,"class","kaching-bundles__bar-pricing-row kaching-bundles__bar-pricing-row--secondary")},m(t,c){h(t,e,c),d(e,n),n.innerHTML=r,d(e,a),d(e,i),i.innerHTML=s},p(t,e){2049&e[0]&&r!==(r=te(t[11],t[0].moneyFormat)+"")&&(n.innerHTML=r),16385&e[0]&&s!==(s=te(t[14],t[0].moneyFormat)+"")&&(i.innerHTML=s)},d(t){t&&p(e)}}}function Oe(t){let e,n,a,i,r=W({length:t[13]}),s=[];for(let l=0;l<r.length;l+=1)s[l]=je(Ve(t,r,l));const c=t=>J(s[t],1,1,(()=>{s[t]=null}));return{c(){e=m("div"),n=m("div"),n.textContent=`${t[28]}`,a=b();for(let t=0;t<s.length;t+=1)s[t].c();v(n,"class","kaching-bundles__bar-variant-names"),v(e,"class","kaching-bundles__bar-variants")},m(t,r){h(t,e,r),d(e,n),d(e,a);for(let n=0;n<s.length;n+=1)s[n]&&s[n].m(e,null);i=!0},p(t,n){if(1073751211&n[0]){let a;for(r=W({length:t[13]}),a=0;a<r.length;a+=1){const i=Ve(t,r,a);s[a]?(s[a].p(i,n),Z(s[a],1)):(s[a]=je(i),s[a].c(),Z(s[a],1),s[a].m(e,null))}for(j(),a=r.length;a<s.length;a+=1)c(a);U()}},i(t){if(!i){for(let t=0;t<r.length;t+=1)Z(s[t]);i=!0}},o(t){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)J(s[e]);i=!1},d(t){t&&p(e),g(s,t)}}}function je(t){let e,n;return e=new Ot({props:{config:t[0],product:t[5],selectedVariantId:t[10][t[52]],swatchSettings:t[3],mediaImages:t[7],number:t[52]+1,translations:t[1]}}),e.$on("change",(function(...e){return t[38](t[52],...e)})),{c(){K(e.$$.fragment)},m(t,a){X(e,t,a),n=!0},p(n,a){t=n;const i={};1&a[0]&&(i.config=t[0]),32&a[0]&&(i.product=t[5]),1024&a[0]&&(i.selectedVariantId=t[10][t[52]]),8&a[0]&&(i.swatchSettings=t[3]),128&a[0]&&(i.mediaImages=t[7]),2&a[0]&&(i.translations=t[1]),e.$set(i)},i(t){n||(Z(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){Y(e,t)}}}function Ue(t){let e,n;return e=new ze({props:{config:t[0],translations:t[1],dealBlock:t[2],upsell:t[4].upsell,otherProducts:t[6],mediaImages:t[7],swatchSettings:t[3],dealBarSelected:t[9]}}),e.$on("variantChanged",t[32]),{c(){K(e.$$.fragment)},m(t,a){X(e,t,a),n=!0},p(t,n){const a={};1&n[0]&&(a.config=t[0]),2&n[0]&&(a.translations=t[1]),4&n[0]&&(a.dealBlock=t[2]),16&n[0]&&(a.upsell=t[4].upsell),64&n[0]&&(a.otherProducts=t[6]),128&n[0]&&(a.mediaImages=t[7]),8&n[0]&&(a.swatchSettings=t[3]),512&n[0]&&(a.dealBarSelected=t[9]),e.$set(a)},i(t){n||(Z(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){Y(e,t)}}}function Ze(t){let e,n;return e=new me({props:{config:t[0],translations:t[1],freeGift:t[4].freeGift,text:t[23],otherProducts:t[6],mediaImages:t[7],swatchSettings:t[3],dealBarSelected:t[9]}}),e.$on("variantChanged",t[31]),{c(){K(e.$$.fragment)},m(t,a){X(e,t,a),n=!0},p(t,n){const a={};1&n[0]&&(a.config=t[0]),2&n[0]&&(a.translations=t[1]),16&n[0]&&(a.freeGift=t[4].freeGift),8388608&n[0]&&(a.text=t[23]),64&n[0]&&(a.otherProducts=t[6]),128&n[0]&&(a.mediaImages=t[7]),8&n[0]&&(a.swatchSettings=t[3]),512&n[0]&&(a.dealBarSelected=t[9]),e.$set(a)},i(t){n||(Z(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){Y(e,t)}}}function Je(t){let e,n,a,i,r,s,c,l,o,u,g,$,f,y,k,w,I,S,B,P,T,M,z,V,L,F=t[24]&&Le(t);function D(t,e){return t[4].mediaImageGID?De:Fe}let q=D(t),G=q(t),N=t[25]&&qe(t),H=t[26]&&Ge(t);function E(t,e){return t[2].showBothPrices?Ee:t[17]&&!t[0].ignoreUnitPrice?He:Ne}let Q=E(t),R=Q(t),A=t[19]&&Oe(t),C=t[4].upsell&&Ue(t),O=t[4].freeGift&&Ze(t);return{c(){e=m("div"),n=m("input"),r=b(),s=m("label"),F&&F.c(),c=b(),l=m("div"),o=m("div"),G.c(),u=b(),g=m("div"),$=m("div"),f=m("div"),y=m("span"),k=b(),N&&N.c(),w=b(),H&&H.c(),I=b(),S=m("div"),R.c(),B=b(),A&&A.c(),P=b(),C&&C.c(),T=b(),O&&O.c(),v(n,"type","radio"),v(n,"name",a="kaching-bundles-deal-"+t[8]),n.value=i=t[4].id,v(n,"id",t[18]),n.checked=t[9],v(y,"class","kaching-bundles__bar-title"),v(f,"class","kaching-bundles__bar-first-line"),v($,"class","kaching-bundles__bar-content-left"),v(S,"class","kaching-bundles__bar-pricing"),v(g,"class","kaching-bundles__bar-content"),v(o,"class","kaching-bundles__bar-main"),v(l,"class","kaching-bundles__bar-wrapper"),v(s,"for",t[18]),v(s,"class","kaching-bundles__bar-container"),x(s,"kaching-bundles__bar-container--most-popular",t[24]),x(s,"kaching-bundles__bar-container--most-popular--simple",t[24]&&"simple"===t[4].badgeStyle),x(s,"kaching-bundles__bar-container--most-popular--fancy",t[24]&&"most-popular"===t[4].badgeStyle),v(e,"class","kaching-bundles__bar"),v(e,"data-deal-bar-id",M=t[4].id),x(e,"kaching-bundles__bar--selected",t[9])},m(a,i){h(a,e,i),d(e,n),d(e,r),d(e,s),F&&F.m(s,null),d(s,c),d(s,l),d(l,o),G.m(o,null),d(o,u),d(o,g),d(g,$),d($,f),d(f,y),y.innerHTML=t[27],d(f,k),N&&N.m(f,null),d($,w),H&&H.m($,null),d(g,I),d(g,S),R.m(S,null),d(l,B),A&&A.m(l,null),d(s,P),C&&C.m(s,null),d(s,T),O&&O.m(s,null),z=!0,V||(L=_(n,"change",t[29]),V=!0)},p(t,r){(!z||256&r[0]&&a!==(a="kaching-bundles-deal-"+t[8]))&&v(n,"name",a),(!z||16&r[0]&&i!==(i=t[4].id))&&(n.value=i),(!z||262144&r[0])&&v(n,"id",t[18]),(!z||512&r[0])&&(n.checked=t[9]),t[24]?F?(F.p(t,r),16777216&r[0]&&Z(F,1)):(F=Le(t),F.c(),Z(F,1),F.m(s,c)):F&&(j(),J(F,1,1,(()=>{F=null})),U()),q===(q=D(t))&&G?G.p(t,r):(G.d(1),G=q(t),G&&(G.c(),G.m(o,u))),(!z||134217728&r[0])&&(y.innerHTML=t[27]),t[25]?N?N.p(t,r):(N=qe(t),N.c(),N.m(f,null)):N&&(N.d(1),N=null),t[26]?H?H.p(t,r):(H=Ge(t),H.c(),H.m($,null)):H&&(H.d(1),H=null),Q===(Q=E(t))&&R?R.p(t,r):(R.d(1),R=Q(t),R&&(R.c(),R.m(S,null))),t[19]?A?(A.p(t,r),524288&r[0]&&Z(A,1)):(A=Oe(t),A.c(),Z(A,1),A.m(l,null)):A&&(j(),J(A,1,1,(()=>{A=null})),U()),t[4].upsell?C?(C.p(t,r),16&r[0]&&Z(C,1)):(C=Ue(t),C.c(),Z(C,1),C.m(s,T)):C&&(j(),J(C,1,1,(()=>{C=null})),U()),t[4].freeGift?O?(O.p(t,r),16&r[0]&&Z(O,1)):(O=Ze(t),O.c(),Z(O,1),O.m(s,null)):O&&(j(),J(O,1,1,(()=>{O=null})),U()),(!z||262144&r[0])&&v(s,"for",t[18]),(!z||16777216&r[0])&&x(s,"kaching-bundles__bar-container--most-popular",t[24]),(!z||16777232&r[0])&&x(s,"kaching-bundles__bar-container--most-popular--simple",t[24]&&"simple"===t[4].badgeStyle),(!z||16777232&r[0])&&x(s,"kaching-bundles__bar-container--most-popular--fancy",t[24]&&"most-popular"===t[4].badgeStyle),(!z||16&r[0]&&M!==(M=t[4].id))&&v(e,"data-deal-bar-id",M),(!z||512&r[0])&&x(e,"kaching-bundles__bar--selected",t[9])},i(t){z||(Z(F),Z(A),Z(C),Z(O),z=!0)},o(t){J(F),J(A),J(C),J(O),z=!1},d(t){t&&p(e),F&&F.d(),G.d(),N&&N.d(),H&&H.d(),R.d(),A&&A.d(),C&&C.d(),O&&O.d(),V=!1,L()}}}function We(t){return"bxgy"===t.dealBarType?t.buyQuantity+t.getQuantity:Number(t.quantity)}function Ke(t,e,n){let a,i,r,s,c,l,o,u,d,h,p,g,m,$,f,b,y,_,v,k,w,I,{config:x}=e,{translations:S={}}=e,{dealBlock:B}=e,{swatchSettings:P}=e,{dealBar:z}=e,{product:V}=e,{otherProducts:L=[]}=e,{mediaImages:F=[]}=e,{customQuantity:D}=e,{currentVariantId:q}=e,{componentId:G}=e,{selected:N=!1}=e;const H=M();let E=!1,Q=null,R=null;const A=V.options.map((t=>t.name)).join(", ");function C(t){switch(z.dealBarType){case void 0:case"quantity-break":return function(t,e,n,a){return ce({discountType:t.discountType,discountValue:t.discountValue,discountQuantity:t.quantity,variantQuantities:e,currencyRate:n,priceRounding:a})}(z,t,x.currencyRate,a);case"bxgy":return function(t,e){const n=e.sort(((t,e)=>t.variant.price-e.variant.price));let a=0,i=e.map((({quantity:t})=>t)).reduce(((t,e)=>t+e),0),r=t.getQuantity;for(const{variant:s,quantity:c}of n){if(i<=0)break;const t=Math.min(c,i),e=Math.max(0,t-r),n=t-e;a+=s.price*e,r-=n,i-=t}return a}(z,t)}}function O(t,e){const a=[...s];a[t]=e,n(10,s=a),N&&H("variantSelected",{variantId:e})}function j(t,e=!1){if(!E&&!e)return;const n=U(t),a=z.freeGift&&Q?{variantId:Q,quantity:z.freeGift.quantity}:null,i=z.upsell&&R?{variantId:R,quantity:z.upsell.quantity}:null,r=te(C(n),x.moneyFormat);H("variantsChanged",{variantQuantities:n,freeGift:a,upsell:i,formattedPrice:r,preselected:e})}function U(t){return t.reduce(((t,e)=>{const n=t.find((({variant:t})=>t.id===e));if(n)n.quantity+=1;else{const n=V.variants.find((t=>t.id===e));if(!n)return t;t.push({variant:n,quantity:1})}return t}),[])}T((()=>{N&&(H("dealBarSelected",{dealBarId:z.id,preselected:!0}),j(s,!0)),E=!0}));return t.$$set=t=>{"config"in t&&n(0,x=t.config),"translations"in t&&n(1,S=t.translations),"dealBlock"in t&&n(2,B=t.dealBlock),"swatchSettings"in t&&n(3,P=t.swatchSettings),"dealBar"in t&&n(4,z=t.dealBar),"product"in t&&n(5,V=t.product),"otherProducts"in t&&n(6,L=t.otherProducts),"mediaImages"in t&&n(7,F=t.mediaImages),"customQuantity"in t&&n(33,D=t.customQuantity),"currentVariantId"in t&&n(34,q=t.currentVariantId),"componentId"in t&&n(8,G=t.componentId),"selected"in t&&n(9,N=t.selected)},t.$$.update=()=>{var e,P,T,M;4&t.$$.dirty[0]&&(a=B.priceRounding?{perItem:B.showPricesPerItem,precision:B.priceRoundingPrecision}:void 0),36&t.$$.dirty[0]&&n(37,i=B&&(null==(P=null==(e=B.defaultVariants)?void 0:e.find((t=>Number(t.productGID.split("/").pop())===V.id)))?void 0:P.variantGIDs)||[]),16&t.$$.dirty[0]|4&t.$$.dirty[1]&&n(13,r=D||We(z)),8192&t.$$.dirty[0]|72&t.$$.dirty[1]&&n(10,s=function(t,e,n){let a=[];const i=B.differentVariantsEnabled&&t>1;for(let r=0;r<t;r++){if(i&&e[r]){const t=Number(e[r].split("/").pop());if(V.variants.find((e=>e.id==t))){a.push(t);continue}}n&&a.push(n)}return a}(r,i,q)),1536&t.$$.dirty[0]&&N&&s.length&&j(s),1024&t.$$.dirty[0]&&n(35,c=U(s)),20&t.$$.dirty[0]|16&t.$$.dirty[1]&&n(14,(T=B,M=z,m=c.map((({variant:t,quantity:e})=>{let n=t.price;const a=T.useProductCompareAtPrice||(void 0===M.dealBarType||"quantity-break"===M.dealBarType)&&"default"===M.discountType;return t.compareAtPrice&&a&&(n=Math.max(n,t.compareAtPrice)),n*e})).reduce(((t,e)=>t+e),0))),4&t.$$.dirty[0]|16&t.$$.dirty[1]&&n(11,f=B&&C(c)),26673&t.$$.dirty[0]&&n(36,l=se({config:x,product:V,dealBar:z,totalFullPrice:m,totalDiscountedPrice:f,quantity:r})),18&t.$$.dirty[0]|32&t.$$.dirty[1]&&n(27,o=l(S[z.title]||z.title)),18&t.$$.dirty[0]|32&t.$$.dirty[1]&&n(26,u=l(S[z.subtitle]||z.subtitle)),18&t.$$.dirty[0]|32&t.$$.dirty[1]&&n(25,d=l(S[z.label]||z.label)),18&t.$$.dirty[0]|32&t.$$.dirty[1]&&n(15,h=l(S[z.badgeText]||z.badgeText)),32788&t.$$.dirty[0]&&n(24,p=("most-popular"===z.badgeStyle||"simple"===z.badgeStyle&&h)&&"vertical"===B.blockLayout),18&t.$$.dirty[0]|32&t.$$.dirty[1]&&n(23,g=z.freeGift?l(S[z.freeGift.text]||z.freeGift.text):""),24576&t.$$.dirty[0]&&n(22,$=Math.ceil(m/r)),10240&t.$$.dirty[0]&&n(21,b=Math.ceil(f/r)),18432&t.$$.dirty[0]&&n(20,y=m!==f),8196&t.$$.dirty[0]&&n(19,_=r&&function(t){return!(!t.differentVariantsEnabled||["horizontal","grid","plain"].includes(t.blockLayout)||1===V.variants.length||!t.hideVariantPicker&&1==r&&!t.showVariantsForSingleQuantity)}(B)),272&t.$$.dirty[0]&&n(18,v=`${z.id}_${G}`),16&t.$$.dirty[1]&&n(12,k=function(t){const e=t[0];if(!e)return null;const n=e.variant;if(!n.unitPriceReferenceValue)return null;const{unitPriceReferenceValue:a,unitPriceReferenceUnit:i}=n;return 1==a?i:`${a}${i}`}(c)),6144&t.$$.dirty[0]|16&t.$$.dirty[1]&&n(17,w=k&&function(t,e){const n=t.reduce(((t,{variant:e,quantity:n})=>{const{unitPriceQuantityValue:a,unitPriceQuantityUnit:i,unitPriceReferenceValue:r,unitPriceReferenceUnit:s}=e;if(!(a&&i&&r&&s))return t;const c=function(t,e,n){return e===n?t:"g"===e&&"kg"===n||"ml"===e&&"l"===n?t/1e3:void 0}(a,i,s);return c?t+c/r*n:t}),0);return n?e/n:null}(c,f)),144&t.$$.dirty[0]&&n(16,I=F&&(t=>{if(!t)return;const e=F.find((e=>e.gid===t));return null==e?void 0:e.url})(z.mediaImageGID)||$e)},[x,S,B,P,z,V,L,F,G,N,s,f,k,r,m,h,I,w,v,_,y,b,$,g,p,d,u,o,A,function(){H("dealBarSelected",{dealBarId:z.id,dealBarQuantity:We(z),preselected:!1})},O,function(t){const{variantId:e}=t.detail;Q=e,N&&j(s)},function(t){const{variantId:e}=t.detail;R=e,N&&j(s)},D,q,c,l,i,(t,e)=>O(t,e.detail.variantId)]}nt(ze,{config:{},translations:{},dealBlock:{},upsell:{},mediaImages:{},otherProducts:{},swatchSettings:{},dealBarSelected:{type:"Boolean"}},[],[],!0);class Xe extends at{constructor(t){super(),tt(this,t,Ke,Je,c,{config:0,translations:1,dealBlock:2,swatchSettings:3,dealBar:4,product:5,otherProducts:6,mediaImages:7,customQuantity:33,currentVariantId:34,componentId:8,selected:9},null,[-1,-1])}get config(){return this.$$.ctx[0]}set config(t){this.$$set({config:t}),Q()}get translations(){return this.$$.ctx[1]}set translations(t){this.$$set({translations:t}),Q()}get dealBlock(){return this.$$.ctx[2]}set dealBlock(t){this.$$set({dealBlock:t}),Q()}get swatchSettings(){return this.$$.ctx[3]}set swatchSettings(t){this.$$set({swatchSettings:t}),Q()}get dealBar(){return this.$$.ctx[4]}set dealBar(t){this.$$set({dealBar:t}),Q()}get product(){return this.$$.ctx[5]}set product(t){this.$$set({product:t}),Q()}get otherProducts(){return this.$$.ctx[6]}set otherProducts(t){this.$$set({otherProducts:t}),Q()}get mediaImages(){return this.$$.ctx[7]}set mediaImages(t){this.$$set({mediaImages:t}),Q()}get customQuantity(){return this.$$.ctx[33]}set customQuantity(t){this.$$set({customQuantity:t}),Q()}get currentVariantId(){return this.$$.ctx[34]}set currentVariantId(t){this.$$set({currentVariantId:t}),Q()}get componentId(){return this.$$.ctx[8]}set componentId(t){this.$$set({componentId:t}),Q()}get selected(){return this.$$.ctx[9]}set selected(t){this.$$set({selected:t}),Q()}}function Ye(t){var e;let n,a,i,r,s,c,l,o,u,g,$,y,_,w=(null==(e=t[4])?void 0:e.title)+"",I=te(t[11],t[0].moneyFormat)+"",x=te(t[10],t[0].moneyFormat)+"";function S(t,e){return t[6]&&"default"!==t[3].productGID&&t[9]?en:tn}let B=S(t),P=B(t),T=t[3].quantity>1&&nn(t),M=t[6]&&t[4].variants.length>1&&!t[3].variantGID&&t[7]&&an(t);return{c(){n=m("div"),P.c(),a=b(),i=m("div"),T&&T.c(),r=b(),s=m("span"),c=f(w),l=b(),o=m("div"),u=m("span"),g=b(),$=m("span"),y=b(),M&&M.c(),v(i,"class","kaching-bundles__bundle-products__title"),v(u,"class","kaching-bundles__bundle-products__price"),v($,"class","kaching-bundles__bundle-products__full-price"),v(o,"class","kaching-bundles__bundle-products__pricing"),v(n,"class","kaching-bundles__bundle-products__product")},m(t,e){h(t,n,e),P.m(n,null),d(n,a),d(n,i),T&&T.m(i,null),d(i,r),d(i,s),d(s,c),d(n,l),d(n,o),d(o,u),u.innerHTML=I,d(o,g),d(o,$),$.innerHTML=x,d(n,y),M&&M.m(n,null),_=!0},p(t,e){var s;B===(B=S(t))&&P?P.p(t,e):(P.d(1),P=B(t),P&&(P.c(),P.m(n,a))),t[3].quantity>1?T?T.p(t,e):(T=nn(t),T.c(),T.m(i,r)):T&&(T.d(1),T=null),(!_||16&e)&&w!==(w=(null==(s=t[4])?void 0:s.title)+"")&&k(c,w),(!_||2049&e)&&I!==(I=te(t[11],t[0].moneyFormat)+"")&&(u.innerHTML=I),(!_||1025&e)&&x!==(x=te(t[10],t[0].moneyFormat)+"")&&($.innerHTML=x),t[6]&&t[4].variants.length>1&&!t[3].variantGID&&t[7]?M?(M.p(t,e),216&e&&Z(M,1)):(M=an(t),M.c(),Z(M,1),M.m(n,null)):M&&(j(),J(M,1,1,(()=>{M=null})),U())},i(t){_||(Z(M),_=!0)},o(t){J(M),_=!1},d(t){t&&p(n),P.d(),T&&T.d(),M&&M.d()}}}function tn(t){let e,n;return{c(){e=m("img"),u(e.src,n=t[8])||v(e,"src",n),v(e,"alt",""),v(e,"height",50),v(e,"class","kaching-bundles__bundle-products__image")},m(t,n){h(t,e,n)},p(t,a){256&a&&!u(e.src,n=t[8])&&v(e,"src",n)},d(t){t&&p(e)}}}function en(t){let e,n,a;return{c(){e=m("a"),n=m("img"),u(n.src,a=t[8])||v(n,"src",a),v(n,"alt",""),v(n,"height",50),v(n,"class","kaching-bundles__bundle-products__image"),v(e,"href",t[9]),v(e,"target","_blank")},m(t,a){h(t,e,a),d(e,n)},p(t,i){256&i&&!u(n.src,a=t[8])&&v(n,"src",a),512&i&&v(e,"href",t[9])},d(t){t&&p(e)}}}function nn(t){let e,n,a,i=t[3].quantity+"";return{c(){e=m("span"),n=f(i),a=f("x"),v(e,"class","kaching-bundles__bundle-products__quantity")},m(t,i){h(t,e,i),d(e,n),d(e,a)},p(t,e){8&e&&i!==(i=t[3].quantity+"")&&k(n,i)},d(t){t&&p(e)}}}function an(t){let e,n;return e=new Ot({props:{config:t[0],product:t[4],selectedVariantId:t[7],swatchSettings:t[2],mediaImages:t[5],translations:t[1]}}),e.$on("change",t[12]),{c(){K(e.$$.fragment)},m(t,a){X(e,t,a),n=!0},p(t,n){const a={};1&n&&(a.config=t[0]),16&n&&(a.product=t[4]),128&n&&(a.selectedVariantId=t[7]),4&n&&(a.swatchSettings=t[2]),32&n&&(a.mediaImages=t[5]),2&n&&(a.translations=t[1]),e.$set(a)},i(t){n||(Z(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){Y(e,t)}}}function rn(t){let e,n,a=t[4]&&Ye(t);return{c(){a&&a.c(),e=y()},m(t,i){a&&a.m(t,i),h(t,e,i),n=!0},p(t,[n]){t[4]?a?(a.p(t,n),16&n&&Z(a,1)):(a=Ye(t),a.c(),Z(a,1),a.m(e.parentNode,e)):a&&(j(),J(a,1,1,(()=>{a=null})),U())},i(t){n||(Z(a),n=!0)},o(t){J(a),n=!1},d(t){t&&p(e),a&&a.d(t)}}}function sn(t,e,n){let a,i,r,s,c,l,{config:o}=e,{translations:u}=e,{dealBlock:d}=e,{swatchSettings:h}=e,{bundleProduct:p}=e,{product:g}=e,{mediaImages:m=[]}=e,{dealBarSelected:$}=e,{currentVariantId:f}=e,{priceRounding:b}=e;const y=M();let _=!1;return T((()=>{n(16,_=!0)})),t.$$set=t=>{"config"in t&&n(0,o=t.config),"translations"in t&&n(1,u=t.translations),"dealBlock"in t&&n(13,d=t.dealBlock),"swatchSettings"in t&&n(2,h=t.swatchSettings),"bundleProduct"in t&&n(3,p=t.bundleProduct),"product"in t&&n(4,g=t.product),"mediaImages"in t&&n(5,m=t.mediaImages),"dealBarSelected"in t&&n(6,$=t.dealBarSelected),"currentVariantId"in t&&n(14,f=t.currentVariantId),"priceRounding"in t&&n(15,b=t.priceRounding)},t.$$.update=()=>{16408&t.$$.dirty&&n(7,a="default"===p.productGID&&f||(p.variantGID?Number(p.variantGID.split("/").pop()):null==g?void 0:g.variants[0].id)),144&t.$$.dirty&&n(17,i=a?null==g?void 0:g.variants.find((t=>t.id===a)):void 0),196616&t.$$.dirty&&i&&_&&y("variantChanged",{variant:i,quantity:p.quantity}),163849&t.$$.dirty&&n(11,r=ce({discountType:p.discountType,discountValue:p.discountValue,discountQuantity:p.quantity,variantQuantities:i?[{variant:i,quantity:p.quantity}]:[],currencyRate:o.currencyRate,priceRounding:b})),131072&t.$$.dirty&&n(10,s=function(t){if(!t)return 0;let e=t.price;return d.useProductCompareAtPrice&&t.compareAtPrice&&(e=Math.max(e,t.compareAtPrice)),e*p.quantity}(i)),131088&t.$$.dirty&&n(9,c=(null==g?void 0:g.url)?`${g.url}?variant=${i.id}`:void 0),131088&t.$$.dirty&&n(8,l=(null==i?void 0:i.image)||(null==g?void 0:g.image))},[o,u,h,p,g,m,$,a,l,c,s,r,function(t){const{variantId:e}=t.detail;n(7,a=e)},d,f,b,_,i]}nt(Xe,{config:{},translations:{},dealBlock:{},swatchSettings:{},dealBar:{},product:{},otherProducts:{},mediaImages:{},customQuantity:{},currentVariantId:{},componentId:{},selected:{type:"Boolean"}},[],[],!0);class cn extends at{constructor(t){super(),tt(this,t,sn,rn,c,{config:0,translations:1,dealBlock:13,swatchSettings:2,bundleProduct:3,product:4,mediaImages:5,dealBarSelected:6,currentVariantId:14,priceRounding:15})}get config(){return this.$$.ctx[0]}set config(t){this.$$set({config:t}),Q()}get translations(){return this.$$.ctx[1]}set translations(t){this.$$set({translations:t}),Q()}get dealBlock(){return this.$$.ctx[13]}set dealBlock(t){this.$$set({dealBlock:t}),Q()}get swatchSettings(){return this.$$.ctx[2]}set swatchSettings(t){this.$$set({swatchSettings:t}),Q()}get bundleProduct(){return this.$$.ctx[3]}set bundleProduct(t){this.$$set({bundleProduct:t}),Q()}get product(){return this.$$.ctx[4]}set product(t){this.$$set({product:t}),Q()}get mediaImages(){return this.$$.ctx[5]}set mediaImages(t){this.$$set({mediaImages:t}),Q()}get dealBarSelected(){return this.$$.ctx[6]}set dealBarSelected(t){this.$$set({dealBarSelected:t}),Q()}get currentVariantId(){return this.$$.ctx[14]}set currentVariantId(t){this.$$set({currentVariantId:t}),Q()}get priceRounding(){return this.$$.ctx[15]}set priceRounding(t){this.$$set({priceRounding:t}),Q()}}function ln(t){let e,a,i,r;return{c(){e=$("svg"),a=$("circle"),i=$("path"),r=$("path"),v(a,"cx","10"),v(a,"cy","10"),v(a,"r","10"),v(a,"fill","currentColor"),v(i,"fill","#fff"),v(i,"d","M5 9h10v2H5z"),v(r,"fill","#fff"),v(r,"d","M11 5v10H9V5z"),v(e,"width","20"),v(e,"height","20"),v(e,"fill","none"),v(e,"xmlns","http://www.w3.org/2000/svg")},m(t,n){h(t,e,n),d(e,a),d(e,i),d(e,r)},p:n,i:n,o:n,d(t){t&&p(e)}}}nt(cn,{config:{},translations:{},dealBlock:{},swatchSettings:{},bundleProduct:{},product:{},mediaImages:{},dealBarSelected:{},currentVariantId:{},priceRounding:{}},[],[],!0);class on extends at{constructor(t){super(),tt(this,t,null,ln,c,{})}}function un(t,e,n){const a=t.slice();return a[32]=e[n],a[34]=n,a}function dn(t){let e,n;return e=new Yt({props:{style:t[4].badgeStyle,text:t[14]||void 0}}),{c(){K(e.$$.fragment)},m(t,a){X(e,t,a),n=!0},p(t,n){const a={};16&n[0]&&(a.style=t[4].badgeStyle),16384&n[0]&&(a.text=t[14]||void 0),e.$set(a)},i(t){n||(Z(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){Y(e,t)}}}function hn(t){let e;return{c(){e=m("div"),v(e,"class","kaching-bundles__bar-radio")},m(t,n){h(t,e,n)},p:n,d(t){t&&p(e)}}}function pn(t){let e,n;return{c(){e=m("img"),v(e,"class","kaching-bundles__bar-image"),v(e,"alt",""),u(e.src,n=t[15])||v(e,"src",n)},m(t,n){h(t,e,n)},p(t,a){32768&a[0]&&!u(e.src,n=t[15])&&v(e,"src",n)},d(t){t&&p(e)}}}function gn(t){let e;return{c(){e=m("span"),v(e,"class","kaching-bundles__bar-label")},m(n,a){h(n,e,a),e.innerHTML=t[17]},p(t,n){131072&n[0]&&(e.innerHTML=t[17])},d(t){t&&p(e)}}}function mn(t){let e;return{c(){e=m("div"),v(e,"class","kaching-bundles__bar-subtitle")},m(n,a){h(n,e,a),e.innerHTML=t[18]},p(t,n){262144&n[0]&&(e.innerHTML=t[18])},d(t){t&&p(e)}}}function $n(t){let e,n=te(t[13],t[0].moneyFormat)+"";return{c(){e=m("div"),v(e,"class","kaching-bundles__bar-full-price")},m(t,a){h(t,e,a),e.innerHTML=n},p(t,a){8193&a[0]&&n!==(n=te(t[13],t[0].moneyFormat)+"")&&(e.innerHTML=n)},d(t){t&&p(e)}}}function fn(t){let e,n,a=W(t[4].bundleProducts),i=[];for(let s=0;s<a.length;s+=1)i[s]=vn(un(t,a,s));const r=t=>J(i[t],1,1,(()=>{i[t]=null}));return{c(){e=m("div");for(let t=0;t<i.length;t+=1)i[t].c();v(e,"class","kaching-bundles__bundle-products")},m(t,a){h(t,e,a);for(let n=0;n<i.length;n+=1)i[n]&&i[n].m(e,null);n=!0},p(t,n){if(8392191&n[0]){let s;for(a=W(t[4].bundleProducts),s=0;s<a.length;s+=1){const r=un(t,a,s);i[s]?(i[s].p(r,n),Z(i[s],1)):(i[s]=vn(r),i[s].c(),Z(i[s],1),i[s].m(e,null))}for(j(),s=a.length;s<i.length;s+=1)r(s);U()}},i(t){if(!n){for(let t=0;t<a.length;t+=1)Z(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)J(i[e]);n=!1},d(t){t&&p(e),g(i,t)}}}function bn(t){let e;return{c(){e=m("div"),e.innerHTML="<span>Select product</span>",v(e,"class","kaching-bundles__bundle-products__product kaching-bundles__bundle-products__product--placeholder")},m(t,n){h(t,e,n)},p:n,i:n,o:n,d(t){t&&p(e)}}}function yn(t){let e,n;return e=new cn({props:{bundleProduct:t[32],product:wn(t[32],t[5],t[6]),config:t[0],dealBlock:t[2],dealBarSelected:t[10],priceRounding:t[11],swatchSettings:t[3],mediaImages:t[7],translations:t[1],currentVariantId:t[8]}}),e.$on("variantChanged",(function(){s(t[23](t[32].id))&&t[23](t[32].id).apply(this,arguments)})),{c(){K(e.$$.fragment)},m(t,a){X(e,t,a),n=!0},p(n,a){t=n;const i={};16&a[0]&&(i.bundleProduct=t[32]),112&a[0]&&(i.product=wn(t[32],t[5],t[6])),1&a[0]&&(i.config=t[0]),4&a[0]&&(i.dealBlock=t[2]),1024&a[0]&&(i.dealBarSelected=t[10]),2048&a[0]&&(i.priceRounding=t[11]),8&a[0]&&(i.swatchSettings=t[3]),128&a[0]&&(i.mediaImages=t[7]),2&a[0]&&(i.translations=t[1]),256&a[0]&&(i.currentVariantId=t[8]),e.$set(i)},i(t){n||(Z(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){Y(e,t)}}}function _n(t){let e,n,a,i,r,s,c,l,o;return r=new on({}),{c(){e=m("div"),n=m("div"),a=b(),i=m("div"),K(r.$$.fragment),s=b(),c=m("div"),l=b(),v(n,"class","kaching-bundles__bundle-products__divider-line"),v(i,"class","kaching-bundles__bundle-products__divider-icon"),v(c,"class","kaching-bundles__bundle-products__divider-line"),v(e,"class","kaching-bundles__bundle-products__divider")},m(t,u){h(t,e,u),d(e,n),d(e,a),d(e,i),X(r,i,null),d(e,s),d(e,c),d(e,l),o=!0},i(t){o||(Z(r.$$.fragment,t),o=!0)},o(t){J(r.$$.fragment,t),o=!1},d(t){t&&p(e),Y(r)}}}function vn(t){let e,n,a,i,r;const s=[yn,bn],c=[];function l(t,e){return t[32].productGID?0:1}e=l(t),n=c[e]=s[e](t);let o=t[34]<t[4].bundleProducts.length-1&&_n();return{c(){n.c(),a=b(),o&&o.c(),i=y()},m(t,n){c[e].m(t,n),h(t,a,n),o&&o.m(t,n),h(t,i,n),r=!0},p(t,r){let u=e;e=l(t),e===u?c[e].p(t,r):(j(),J(c[u],1,1,(()=>{c[u]=null})),U(),n=c[e],n?n.p(t,r):(n=c[e]=s[e](t),n.c()),Z(n,1),n.m(a.parentNode,a)),t[34]<t[4].bundleProducts.length-1?o?16&r[0]&&Z(o,1):(o=_n(),o.c(),Z(o,1),o.m(i.parentNode,i)):o&&(j(),J(o,1,1,(()=>{o=null})),U())},i(t){r||(Z(n),Z(o),r=!0)},o(t){J(n),J(o),r=!1},d(t){t&&(p(a),p(i)),c[e].d(t),o&&o.d(t)}}}function kn(t){let e,n,a,i,r,s,c,l,o,u,g,$,f,y,k,w,I,S,B,P,T,M,z,V,L,F=te(t[12],t[0].moneyFormat)+"",D=t[16]&&dn(t);function q(t,e){return t[4].mediaImageGID?pn:hn}let G=q(t),N=G(t),H=t[17]&&gn(t),E=t[18]&&mn(t),Q=t[12]<t[13]&&$n(t),R=t[20]&&fn(t);return{c(){e=m("div"),n=m("input"),r=b(),s=m("label"),D&&D.c(),c=b(),l=m("div"),o=m("div"),N.c(),u=b(),g=m("div"),$=m("div"),f=m("div"),y=m("span"),k=b(),H&&H.c(),w=b(),E&&E.c(),I=b(),S=m("div"),B=m("div"),P=b(),Q&&Q.c(),T=b(),R&&R.c(),v(n,"type","radio"),v(n,"name",a="kaching-bundles-deal-"+t[9]),n.value=i=t[4].id,v(n,"id",t[21]),n.checked=t[10],v(y,"class","kaching-bundles__bar-title"),v(f,"class","kaching-bundles__bar-first-line"),v($,"class","kaching-bundles__bar-content-left"),v(B,"class","kaching-bundles__bar-price"),v(S,"class","kaching-bundles__bar-pricing"),v(g,"class","kaching-bundles__bar-content"),v(o,"class","kaching-bundles__bar-main"),v(l,"class","kaching-bundles__bar-wrapper"),v(s,"for",t[21]),v(s,"class","kaching-bundles__bar-container"),x(s,"kaching-bundles__bar-container--most-popular",t[16]),x(s,"kaching-bundles__bar-container--most-popular--simple",t[16]&&"simple"===t[4].badgeStyle),x(s,"kaching-bundles__bar-container--most-popular--fancy",t[16]&&"most-popular"===t[4].badgeStyle),v(e,"class","kaching-bundles__bar"),v(e,"data-deal-bar-id",M=t[4].id),x(e,"kaching-bundles__bar--selected",t[10])},m(a,i){h(a,e,i),d(e,n),d(e,r),d(e,s),D&&D.m(s,null),d(s,c),d(s,l),d(l,o),N.m(o,null),d(o,u),d(o,g),d(g,$),d($,f),d(f,y),y.innerHTML=t[19],d(f,k),H&&H.m(f,null),d($,w),E&&E.m($,null),d(g,I),d(g,S),d(S,B),B.innerHTML=F,d(S,P),Q&&Q.m(S,null),d(l,T),R&&R.m(l,null),z=!0,V||(L=_(n,"change",t[22]),V=!0)},p(t,r){(!z||512&r[0]&&a!==(a="kaching-bundles-deal-"+t[9]))&&v(n,"name",a),(!z||16&r[0]&&i!==(i=t[4].id))&&(n.value=i),(!z||2097152&r[0])&&v(n,"id",t[21]),(!z||1024&r[0])&&(n.checked=t[10]),t[16]?D?(D.p(t,r),65536&r[0]&&Z(D,1)):(D=dn(t),D.c(),Z(D,1),D.m(s,c)):D&&(j(),J(D,1,1,(()=>{D=null})),U()),G===(G=q(t))&&N?N.p(t,r):(N.d(1),N=G(t),N&&(N.c(),N.m(o,u))),(!z||524288&r[0])&&(y.innerHTML=t[19]),t[17]?H?H.p(t,r):(H=gn(t),H.c(),H.m(f,null)):H&&(H.d(1),H=null),t[18]?E?E.p(t,r):(E=mn(t),E.c(),E.m($,null)):E&&(E.d(1),E=null),(!z||4097&r[0])&&F!==(F=te(t[12],t[0].moneyFormat)+"")&&(B.innerHTML=F),t[12]<t[13]?Q?Q.p(t,r):(Q=$n(t),Q.c(),Q.m(S,null)):Q&&(Q.d(1),Q=null),t[20]?R?(R.p(t,r),1048576&r[0]&&Z(R,1)):(R=fn(t),R.c(),Z(R,1),R.m(l,null)):R&&(j(),J(R,1,1,(()=>{R=null})),U()),(!z||2097152&r[0])&&v(s,"for",t[21]),(!z||65536&r[0])&&x(s,"kaching-bundles__bar-container--most-popular",t[16]),(!z||65552&r[0])&&x(s,"kaching-bundles__bar-container--most-popular--simple",t[16]&&"simple"===t[4].badgeStyle),(!z||65552&r[0])&&x(s,"kaching-bundles__bar-container--most-popular--fancy",t[16]&&"most-popular"===t[4].badgeStyle),(!z||16&r[0]&&M!==(M=t[4].id))&&v(e,"data-deal-bar-id",M),(!z||1024&r[0])&&x(e,"kaching-bundles__bar--selected",t[10])},i(t){z||(Z(D),Z(R),z=!0)},o(t){J(D),J(R),z=!1},d(t){t&&p(e),D&&D.d(),N.d(),H&&H.d(),E&&E.d(),Q&&Q.d(),R&&R.d(),V=!1,L()}}}function wn(t,e,n){return"default"===t.productGID?e:n.find((e=>e.id===Number(t.productGID.split("/").pop())))}function In(t,e,n){let a,i,r,s,c,l,o,u,d,h,p,g,m,{config:$}=e,{translations:f={}}=e,{dealBlock:b}=e,{swatchSettings:y}=e,{dealBar:_}=e,{product:v}=e,{otherProducts:k=[]}=e,{mediaImages:w=[]}=e,{currentVariantId:I}=e,{componentId:x}=e,{selected:S=!1}=e;const B=M();let P=!1,z={};function V(){if(!P)return;const t=_.bundleProducts.map((t=>z[t.id])),e=te(le(_,z,$.currencyRate,h),$.moneyFormat);B("variantsChanged",{variantQuantities:t,formattedPrice:e,preselected:!1})}T((()=>{S&&B("dealBarSelected",{dealBarId:_.id,preselected:!0}),P=!0}));return t.$$set=t=>{"config"in t&&n(0,$=t.config),"translations"in t&&n(1,f=t.translations),"dealBlock"in t&&n(2,b=t.dealBlock),"swatchSettings"in t&&n(3,y=t.swatchSettings),"dealBar"in t&&n(4,_=t.dealBar),"product"in t&&n(5,v=t.product),"otherProducts"in t&&n(6,k=t.otherProducts),"mediaImages"in t&&n(7,w=t.mediaImages),"currentVariantId"in t&&n(8,I=t.currentVariantId),"componentId"in t&&n(9,x=t.componentId),"selected"in t&&n(10,S=t.selected)},t.$$.update=()=>{var e,y;528&t.$$.dirty[0]&&n(21,a=`${_.id}_${x}`),16&t.$$.dirty[0]&&n(26,i=_.bundleProducts.filter((({productGID:t})=>t))),1024&t.$$.dirty[0]&&S&&V(),67108960&t.$$.dirty[0]&&n(20,r=i.every((t=>wn(t,v,k)))),16777220&t.$$.dirty[0]&&n(13,p=b&&(e=b,y=z,_.bundleProducts.map((t=>{const n=y[t.id];if(!n)return 0;const{variant:a,quantity:i}=n;let r=a.price;return a.compareAtPrice&&e.useProductCompareAtPrice&&(r=Math.max(r,a.compareAtPrice)),r*i})).reduce(((t,e)=>t+e),0))),4&t.$$.dirty[0]&&n(11,h=b.priceRounding?{perItem:b.showPricesPerItem,precision:b.priceRoundingPrecision}:void 0),16779285&t.$$.dirty[0]&&n(12,g=b&&le(_,z,$.currencyRate,h)),12337&t.$$.dirty[0]&&n(25,s=se({config:$,product:v,dealBar:_,totalFullPrice:p,totalDiscountedPrice:g,quantity:1})),33554450&t.$$.dirty[0]&&n(19,c=s(f[_.title]||_.title)),33554450&t.$$.dirty[0]&&n(18,l=s(f[_.subtitle]||_.subtitle)),33554450&t.$$.dirty[0]&&n(17,o=s(f[_.label]||_.label)),33554450&t.$$.dirty[0]&&n(14,u=s(f[_.badgeText]||_.badgeText)),16404&t.$$.dirty[0]&&n(16,d=("most-popular"===_.badgeStyle||"simple"===_.badgeStyle&&u)&&"vertical"===b.blockLayout),144&t.$$.dirty[0]&&n(15,m=w&&(t=>{if(!t)return;const e=w.find((e=>e.gid===t));return null==e?void 0:e.url})(_.mediaImageGID)||$e)},[$,f,b,y,_,v,k,w,I,x,S,h,g,p,u,m,d,o,l,c,r,a,function(){B("dealBarSelected",{dealBarId:_.id,dealBarQuantity:1})},function(t){return e=>{const{variant:a,quantity:i}=e.detail;if(n(24,z[t]={variant:a,quantity:i},z),!S)return;_.bundleProducts.map((({id:t})=>t)).every((t=>z[t]))&&(t===_.bundleProducts[0].id&&B("variantSelected",{variantId:a.id}),V())}},z,s,i]}nt(on,{},[],[],!0);class xn extends at{constructor(t){super(),tt(this,t,In,kn,c,{config:0,translations:1,dealBlock:2,swatchSettings:3,dealBar:4,product:5,otherProducts:6,mediaImages:7,currentVariantId:8,componentId:9,selected:10},null,[-1,-1])}get config(){return this.$$.ctx[0]}set config(t){this.$$set({config:t}),Q()}get translations(){return this.$$.ctx[1]}set translations(t){this.$$set({translations:t}),Q()}get dealBlock(){return this.$$.ctx[2]}set dealBlock(t){this.$$set({dealBlock:t}),Q()}get swatchSettings(){return this.$$.ctx[3]}set swatchSettings(t){this.$$set({swatchSettings:t}),Q()}get dealBar(){return this.$$.ctx[4]}set dealBar(t){this.$$set({dealBar:t}),Q()}get product(){return this.$$.ctx[5]}set product(t){this.$$set({product:t}),Q()}get otherProducts(){return this.$$.ctx[6]}set otherProducts(t){this.$$set({otherProducts:t}),Q()}get mediaImages(){return this.$$.ctx[7]}set mediaImages(t){this.$$set({mediaImages:t}),Q()}get currentVariantId(){return this.$$.ctx[8]}set currentVariantId(t){this.$$set({currentVariantId:t}),Q()}get componentId(){return this.$$.ctx[9]}set componentId(t){this.$$set({componentId:t}),Q()}get selected(){return this.$$.ctx[10]}set selected(t){this.$$set({selected:t}),Q()}}function Sn(t,e,n){const a=t.slice();return a[25]=e[n],a}function Bn(t){let e,n,a,i,r,s,c=t[11]&&Pn(t),l=W(t[4].dealBars),o=[];for(let d=0;d<l.length;d+=1)o[d]=zn(Sn(t,l,d));const u=t=>J(o[t],1,1,(()=>{o[t]=null}));let $=t[10]&&Vn(t);return{c(){e=m("div"),c&&c.c(),n=b(),a=m("div");for(let t=0;t<o.length;t+=1)o[t].c();i=b(),$&&$.c(),v(a,"class","kaching-bundles__bars"),v(e,"class","kaching-bundles__block kaching-bundles__block--loaded"),v(e,"data-deal-block-id",r=t[4].id),v(e,"style",t[12]),x(e,"kaching-bundles__block--horizontal","horizontal"===t[4].blockLayout),x(e,"kaching-bundles__block--grid","grid"===t[4].blockLayout),x(e,"kaching-bundles__block--plain","plain"===t[4].blockLayout)},m(t,r){h(t,e,r),c&&c.m(e,null),d(e,n),d(e,a);for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(a,null);d(e,i),$&&$.m(e,null),s=!0},p(t,i){if(t[11]?c?c.p(t,i):(c=Pn(t),c.c(),c.m(e,n)):c&&(c.d(1),c=null),254975&i){let e;for(l=W(t[4].dealBars),e=0;e<l.length;e+=1){const n=Sn(t,l,e);o[e]?(o[e].p(n,i),Z(o[e],1)):(o[e]=zn(n),o[e].c(),Z(o[e],1),o[e].m(a,null))}for(j(),e=l.length;e<o.length;e+=1)u(e);U()}t[10]?$?$.p(t,i):($=Vn(t),$.c(),$.m(e,null)):$&&($.d(1),$=null),(!s||16&i&&r!==(r=t[4].id))&&v(e,"data-deal-block-id",r),(!s||4096&i)&&v(e,"style",t[12]),(!s||16&i)&&x(e,"kaching-bundles__block--horizontal","horizontal"===t[4].blockLayout),(!s||16&i)&&x(e,"kaching-bundles__block--grid","grid"===t[4].blockLayout),(!s||16&i)&&x(e,"kaching-bundles__block--plain","plain"===t[4].blockLayout)},i(t){if(!s){for(let t=0;t<l.length;t+=1)Z(o[t]);s=!0}},o(t){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)J(o[e]);s=!1},d(t){t&&p(e),c&&c.d(),g(o,t),$&&$.d()}}}function Pn(t){let e,n;return{c(){e=m("div"),n=f(t[11]),v(e,"class","kaching-bundles__block-title")},m(t,a){h(t,e,a),d(e,n)},p(t,e){2048&e&&k(n,t[11])},d(t){t&&p(e)}}}function Tn(t){let e,n;return e=new Xe({props:{config:t[2],translations:t[3],dealBlock:t[4],swatchSettings:t[9],dealBar:t[25],product:t[5],otherProducts:t[8],mediaImages:t[7],customQuantity:t[25].id===t[1]?t[0]&&Number(t[0]):void 0,selected:t[25].id===t[1],currentVariantId:t[6],componentId:t[13]}}),e.$on("dealBarSelected",t[14]),e.$on("variantSelected",t[15]),e.$on("variantsChanged",t[17]),{c(){K(e.$$.fragment)},m(t,a){X(e,t,a),n=!0},p(t,n){const a={};4&n&&(a.config=t[2]),8&n&&(a.translations=t[3]),16&n&&(a.dealBlock=t[4]),512&n&&(a.swatchSettings=t[9]),16&n&&(a.dealBar=t[25]),32&n&&(a.product=t[5]),256&n&&(a.otherProducts=t[8]),128&n&&(a.mediaImages=t[7]),19&n&&(a.customQuantity=t[25].id===t[1]?t[0]&&Number(t[0]):void 0),18&n&&(a.selected=t[25].id===t[1]),64&n&&(a.currentVariantId=t[6]),e.$set(a)},i(t){n||(Z(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){Y(e,t)}}}function Mn(t){let e,n;return e=new xn({props:{config:t[2],translations:t[3],dealBlock:t[4],swatchSettings:t[9],dealBar:t[25],product:t[5],otherProducts:t[8],mediaImages:t[7],selected:t[25].id===t[1],currentVariantId:t[6],componentId:t[13]}}),e.$on("dealBarSelected",t[14]),e.$on("variantSelected",t[15]),e.$on("variantsChanged",t[16]),{c(){K(e.$$.fragment)},m(t,a){X(e,t,a),n=!0},p(t,n){const a={};4&n&&(a.config=t[2]),8&n&&(a.translations=t[3]),16&n&&(a.dealBlock=t[4]),512&n&&(a.swatchSettings=t[9]),16&n&&(a.dealBar=t[25]),32&n&&(a.product=t[5]),256&n&&(a.otherProducts=t[8]),128&n&&(a.mediaImages=t[7]),18&n&&(a.selected=t[25].id===t[1]),64&n&&(a.currentVariantId=t[6]),e.$set(a)},i(t){n||(Z(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){Y(e,t)}}}function zn(t){let e,n,a,i;const r=[Mn,Tn],s=[];function c(t,e){return"bundle"===t[25].dealBarType?0:1}return e=c(t),n=s[e]=r[e](t),{c(){n.c(),a=y()},m(t,n){s[e].m(t,n),h(t,a,n),i=!0},p(t,i){let l=e;e=c(t),e===l?s[e].p(t,i):(j(),J(s[l],1,1,(()=>{s[l]=null})),U(),n=s[e],n?n.p(t,i):(n=s[e]=r[e](t),n.c()),Z(n,1),n.m(a.parentNode,a))},i(t){i||(Z(n),i=!0)},o(t){J(n),i=!1},d(t){t&&p(a),s[e].d(t)}}}function Vn(t){let e,n,a=t[3]["system.out_of_stock"]+"";return{c(){e=m("div"),n=f(a),v(e,"class","kaching-bundles__out-of-stock")},m(t,a){h(t,e,a),d(e,n)},p(t,e){8&e&&a!==(a=t[3]["system.out_of_stock"]+"")&&k(n,a)},d(t){t&&p(e)}}}function Ln(t){let e,n,a=t[4]&&Bn(t);return{c(){a&&a.c(),e=y()},m(t,i){a&&a.m(t,i),h(t,e,i),n=!0},p(t,[n]){t[4]?a?(a.p(t,n),16&n&&Z(a,1)):(a=Bn(t),a.c(),Z(a,1),a.m(e.parentNode,e)):a&&(j(),J(a,1,1,(()=>{a=null})),U())},i(t){n||(Z(a),n=!0)},o(t){J(a),n=!1},d(t){t&&p(e),a&&a.d(t)}}}function Fn(t){switch(t.dealBarType){case void 0:case"quantity-break":return Number(t.quantity);case"bxgy":return Number(t.buyQuantity)+Number(t.getQuantity);case"bundle":return t.bundleProducts[0].quantity}}function Dn(t,e){return e.some((({variantId:e,quantity:n})=>{const a=t.variants.find((t=>t.id==e));return!!a&&("shopify"===a.inventoryManagement&&("deny"===a.inventoryPolicy&&(null!==a.inventoryQuantity&&n>a.inventoryQuantity)))}))}function qn(t,e,n){let a,i,r,{component:s}=e,{config:c}=e,{translations:l={}}=e,{dealBlock:o}=e,{product:u}=e,{currentVariantId:d}=e,{selectedDealBarId:h}=e,{quantity:p}=e,{mediaImages:g=[]}=e,{otherProducts:m=[]}=e;let $=Math.random().toString(16).slice(2),f=[],b=!1,y=null,_=null,v=[];return t.$$set=t=>{"component"in t&&n(18,s=t.component),"config"in t&&n(2,c=t.config),"translations"in t&&n(3,l=t.translations),"dealBlock"in t&&n(4,o=t.dealBlock),"product"in t&&n(5,u=t.product),"currentVariantId"in t&&n(6,d=t.currentVariantId),"selectedDealBarId"in t&&n(1,h=t.selectedDealBarId),"quantity"in t&&n(0,p=t.quantity),"mediaImages"in t&&n(7,g=t.mediaImages),"otherProducts"in t&&n(8,m=t.otherProducts)},t.$$.update=()=>{16&t.$$.dirty&&n(9,r=o&&{swatchOptions:o.swatchOptions||[],swatchSize:o.swatchSize,swatchShape:o.swatchShape}),16&t.$$.dirty&&n(12,a=o&&lt(o)),24&t.$$.dirty&&n(11,i=o&&(l[o.blockTitle]||o.blockTitle)),18&t.$$.dirty&&n(1,h||(h=o.preselectedDealBarId||o.dealBars[0].id)),17&t.$$.dirty&&p&&o&&function(t,e){const a=t.dealBars.slice().sort(((t,e)=>Fn(t)-Fn(e)));let i=a[0];for(const n of a)switch(n.dealBarType){case void 0:case"quantity-break":Number(n.quantity)<=Number(e)&&(i=n);break;case"bxgy":n.buyQuantity<Number(e)&&(i=n)}n(1,h=i.id)}(o,p)},[p,h,c,l,o,u,d,g,m,r,b,i,a,$,function(t){const{dealBarId:e,dealBarQuantity:a,preselected:i}=t.detail;n(1,h=e);const r=o.dealBars.find((t=>t.id===e));c.keepQuantityInput&&"bundle"!==r.dealBarType&&n(0,p=a),ee(s,"deal-bar-selected",{dealBarId:e,preselected:i})},function(t){const{variantId:e}=t.detail;ee(s,"variant-selected",{variantId:e})},function(t){const{variantQuantities:e,formattedPrice:a,preselected:i}=t.detail,r=e.map((({variant:t,quantity:e})=>({variantId:t.id,quantity:e})));f=[r[0]],v=r.slice(1),y=null,_=null,n(10,b=Dn(u,f)),ee(s,"variants-changed",{variantIdQuantities:f,freeGift:null,upsell:null,bundleProducts:v,formattedPrice:a,preselected:i})},function(t){const{variantQuantities:e,freeGift:a,upsell:i,formattedPrice:r,preselected:c}=t.detail,l=e.map((({variant:t,quantity:e})=>({variantId:t.id,quantity:e})));f=l,y=a,_=i,v=[];const o=l.reduce(((t,e)=>t+e.quantity),0);c&&o<=1&&!a&&!i||(p&&n(0,p=o),n(10,b=Dn(u,f)),ee(s,"variants-changed",{variantIdQuantities:l,freeGift:a,upsell:i,bundleProducts:[],formattedPrice:r,preselected:c}))},s,function(){const t=[...f].map((({variantId:t,quantity:e})=>({variantId:t,quantity:e,properties:{}})));y&&t.push({...y,properties:{__kaching_free_gift_deal_block_id:o.id}}),_&&t.push({..._,properties:{__kaching_upsell_deal_block_id:o.id}});for(const[e,{variantId:n,quantity:a}]of v.entries())t.push({variantId:n,quantity:a,properties:{__kaching_bundle:JSON.stringify({dealBlockId:o.id,dealBarId:h,bundleProductIndex:e+1,defaultProductId:u.id})}});return t}]}nt(xn,{config:{},translations:{},dealBlock:{},swatchSettings:{},dealBar:{},product:{},otherProducts:{},mediaImages:{},currentVariantId:{},componentId:{},selected:{type:"Boolean"}},[],[],!0);class Gn extends at{constructor(t){super(),tt(this,t,qn,Ln,c,{component:18,config:2,translations:3,dealBlock:4,product:5,currentVariantId:6,selectedDealBarId:1,quantity:0,mediaImages:7,otherProducts:8,selectedVariants:19})}get component(){return this.$$.ctx[18]}set component(t){this.$$set({component:t}),Q()}get config(){return this.$$.ctx[2]}set config(t){this.$$set({config:t}),Q()}get translations(){return this.$$.ctx[3]}set translations(t){this.$$set({translations:t}),Q()}get dealBlock(){return this.$$.ctx[4]}set dealBlock(t){this.$$set({dealBlock:t}),Q()}get product(){return this.$$.ctx[5]}set product(t){this.$$set({product:t}),Q()}get currentVariantId(){return this.$$.ctx[6]}set currentVariantId(t){this.$$set({currentVariantId:t}),Q()}get selectedDealBarId(){return this.$$.ctx[1]}set selectedDealBarId(t){this.$$set({selectedDealBarId:t}),Q()}get quantity(){return this.$$.ctx[0]}set quantity(t){this.$$set({quantity:t}),Q()}get mediaImages(){return this.$$.ctx[7]}set mediaImages(t){this.$$set({mediaImages:t}),Q()}get otherProducts(){return this.$$.ctx[8]}set otherProducts(t){this.$$set({otherProducts:t}),Q()}get selectedVariants(){return this.$$.ctx[19]}}function Nn(t){let e,n;return e=new Xe({props:{config:t[0],dealBlock:t[1],swatchSettings:t[6],dealBar:t[2],product:t[3],mediaImages:t[4],currentVariantId:t[5],componentId:t[8],selected:!0}}),{c(){K(e.$$.fragment)},m(t,a){X(e,t,a),n=!0},p(t,n){const a={};1&n&&(a.config=t[0]),2&n&&(a.dealBlock=t[1]),64&n&&(a.swatchSettings=t[6]),4&n&&(a.dealBar=t[2]),8&n&&(a.product=t[3]),16&n&&(a.mediaImages=t[4]),32&n&&(a.currentVariantId=t[5]),e.$set(a)},i(t){n||(Z(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){Y(e,t)}}}function Hn(t){let e,n,a="bundle"!==t[2].dealBarType&&Nn(t);return{c(){e=m("div"),a&&a.c(),v(e,"class","kaching-bundles"),v(e,"style",t[7])},m(t,i){h(t,e,i),a&&a.m(e,null),n=!0},p(t,[i]){"bundle"!==t[2].dealBarType?a?(a.p(t,i),4&i&&Z(a,1)):(a=Nn(t),a.c(),Z(a,1),a.m(e,null)):a&&(j(),J(a,1,1,(()=>{a=null})),U()),(!n||128&i)&&v(e,"style",t[7])},i(t){n||(Z(a),n=!0)},o(t){J(a),n=!1},d(t){t&&p(e),a&&a.d()}}}function En(t,e,n){let a,i,{config:r}=e,{dealBlock:s}=e,{dealBar:c}=e,{product:l}=e,{mediaImages:o=[]}=e,{currentVariantId:u}=e;const d=Math.random().toString(16).slice(2);return t.$$set=t=>{"config"in t&&n(0,r=t.config),"dealBlock"in t&&n(1,s=t.dealBlock),"dealBar"in t&&n(2,c=t.dealBar),"product"in t&&n(3,l=t.product),"mediaImages"in t&&n(4,o=t.mediaImages),"currentVariantId"in t&&n(5,u=t.currentVariantId)},t.$$.update=()=>{2&t.$$.dirty&&n(7,a=s&&lt(s)),2&t.$$.dirty&&n(6,i={swatchOptions:s.swatchOptions||[],swatchSize:s.swatchSize,swatchShape:s.swatchShape})},[r,s,c,l,o,u,i,a,d]}nt(Gn,{component:{},config:{type:"Object",attribute:"config"},translations:{type:"Object",attribute:"translations"},dealBlock:{type:"Object",attribute:"deal-block"},product:{type:"Object",attribute:"product"},currentVariantId:{type:"Number",attribute:"current-variant-id"},selectedDealBarId:{type:"String",attribute:"selected-deal-bar-id"},quantity:{type:"Number",attribute:"quantity"},mediaImages:{type:"Array",attribute:"media-images"},otherProducts:{type:"Array",attribute:"other-products"}},[],["selectedVariants"],!1,(t=>class extends t{constructor(){super(),e(this,"component"),this.component=this}}));class Qn extends at{constructor(t){super(),tt(this,t,En,Hn,c,{config:0,dealBlock:1,dealBar:2,product:3,mediaImages:4,currentVariantId:5})}get config(){return this.$$.ctx[0]}set config(t){this.$$set({config:t}),Q()}get dealBlock(){return this.$$.ctx[1]}set dealBlock(t){this.$$set({dealBlock:t}),Q()}get dealBar(){return this.$$.ctx[2]}set dealBar(t){this.$$set({dealBar:t}),Q()}get product(){return this.$$.ctx[3]}set product(t){this.$$set({product:t}),Q()}get mediaImages(){return this.$$.ctx[4]}set mediaImages(t){this.$$set({mediaImages:t}),Q()}get currentVariantId(){return this.$$.ctx[5]}set currentVariantId(t){this.$$set({currentVariantId:t}),Q()}}nt(Qn,{config:{type:"Object",attribute:"config"},dealBlock:{type:"Object",attribute:"deal-block"},dealBar:{type:"Object",attribute:"deal-bar"},product:{type:"Object",attribute:"product"},mediaImages:{type:"Array",attribute:"media-images"},currentVariantId:{type:"Number",attribute:"current-variant-id"}},[],[],!1,(t=>class extends t{constructor(){super(),e(this,"component"),this.component=this}}));const Rn="kaching-bundles-block",An="kaching-bundles-bar",Cn=Gn;window.customElements&&!window.customElements.get(Rn)&&window.customElements.define(Rn,Cn.element);const On=Qn;window.customElements&&!window.customElements.get(An)&&window.customElements.define(An,On.element);return Cn.element}();
